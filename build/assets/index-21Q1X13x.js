const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-Bm2UdpK2.js","assets/ui-DElh6nK7.js","assets/vendor-bd6wVIFv.js","assets/supabase-ByzS6PGn.js","assets/CatalogPage-ZH96mQrR.js","assets/productsApi-C4gf4nnF.js","assets/AboutPage-C8JW2Irb.js","assets/ContactPage-BAK27SME.js","assets/ProductDetailPage-CS5TbSwl.js","assets/OrderSuccessPage-BqpWC9_6.js","assets/OrderTracking-BF8c4EKI.js","assets/ProfilePage-DoPzmxNr.js"])))=>i.map(i=>d[i]);
import{r as n,a as ye,R as we}from"./vendor-bd6wVIFv.js";import{c as ze,_ as q}from"./supabase-ByzS6PGn.js";import{m as C,X as D,C as V,S as M,A as O,a as ve,M as je,P as ke,T as _e,U as A,L as Y,b as J,c as X,d as Ne,e as Se,f as Z,E as $,g as Q}from"./ui-DElh6nK7.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const g of l.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&c(g)}).observe(document,{childList:!0,subtree:!0});function s(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function c(t){if(t.ep)return;t.ep=!0;const l=s(t);fetch(t.href,l)}})();var ie={exports:{}},R={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ce=n,Pe=Symbol.for("react.element"),Ee=Symbol.for("react.fragment"),Ie=Object.prototype.hasOwnProperty,qe=Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Oe={key:!0,ref:!0,__self:!0,__source:!0};function ne(o,r,s){var c,t={},l=null,g=null;s!==void 0&&(l=""+s),r.key!==void 0&&(l=""+r.key),r.ref!==void 0&&(g=r.ref);for(c in r)Ie.call(r,c)&&!Oe.hasOwnProperty(c)&&(t[c]=r[c]);if(o&&o.defaultProps)for(c in r=o.defaultProps,r)t[c]===void 0&&(t[c]=r[c]);return{$$typeof:Pe,type:o,key:l,ref:g,props:t,_owner:qe.current}}R.Fragment=Ee;R.jsx=ne;R.jsxs=ne;ie.exports=R;var e=ie.exports,le,ee=ye;le=ee.createRoot,ee.hydrateRoot;const Te="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function ce(o){const[r,s]=n.useState(!1),c=()=>{s(!0)},{src:t,alt:l,style:g,className:b,...p}=o;return r?e.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${b??""}`,style:g,children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e.jsx("img",{src:Te,alt:"Error loading image",...p,"data-original-url":t})})}):e.jsx("img",{src:t,alt:l,className:b,style:g,...p,onError:c})}const Me={"nav.catalog":{uz:"Katalog",ru:"Каталог",en:"Catalog"},"nav.about":{uz:"Biz haqimizda",ru:"О нас",en:"About Us"},"nav.contact":{uz:"Aloqa",ru:"Контакты",en:"Contact"},"nav.blog":{uz:"Aksiyalar",ru:"Акции",en:"Promotions"},"home.title":{uz:"Eurodoor — Euro Doors Toshkentda",ru:"Eurodoor — Euro Doors в Ташкенте",en:"Eurodoor — Euro Doors in Tashkent"},"home.subtitle":{uz:"Temir eshiklar & MDF eshiklar",ru:"Железные двери & MDF двери",en:"Iron doors & MDF doors"},"home.description":{uz:"Ko'cha/tashqi uchun temir va MDF eshiklar. Toshkentda o'rnatish, kafolat va bepul maslahat.",ru:"Железные и MDF двери для улицы/внешнего использования. Установка в Ташкенте, гарантия и бесплатная консультация.",en:"Iron and MDF doors for street/external use. Installation in Tashkent, warranty and free consultation."},"home.hero_title":{uz:"Sizning uyingiz xavfsizligi bizning ustuvorligimiz",ru:"Безопасность вашего дома - наш приоритет",en:"Your home security is our priority"},"home.hero_subtitle":{uz:"Zamonaviy dizayn va yuqori xavfsizlik standartlarini birlashtirgan premium temir va MDF eshiklar",ru:"Премиум железные и MDF двери, сочетающие современный дизайн и высокие стандарты безопасности",en:"Premium iron and MDF doors combining modern design and high security standards"},"home.security":{uz:"Yuqori xavfsizlik",ru:"Высокая безопасность",en:"High Security"},"home.security_desc":{uz:"Metall va MDF materiallardan yasalgan mustahkam eshiklar",ru:"Прочные двери из металла и MDF материалов",en:"Strong doors made from metal and MDF materials"},"home.quality":{uz:"Sifat sertifikati",ru:"Сертификат качества",en:"Quality Certificate"},"home.quality_desc":{uz:"Barcha mahsulotlar xalqaro standartlarga javob beradi",ru:"Все продукты соответствуют международным стандартам",en:"All products meet international standards"},"home.delivery":{uz:"Tez yetkazib berish",ru:"Быстрая доставка",en:"Fast Delivery"},"home.delivery_desc":{uz:"Professional o'rnatish xizmati bilan birga",ru:"Вместе с профессиональной установкой",en:"Along with professional installation service"},"home.view_catalog":{uz:"Katalogni ko'rish",ru:"Посмотреть каталог",en:"View Catalog"},"header.profile":{uz:"Profil",ru:"Профиль",en:"Profile"},"header.orders":{uz:"Buyurtmalarim",ru:"Мои заказы",en:"My Orders"},"header.logout":{uz:"Chiqish",ru:"Выйти",en:"Logout"},"header.login":{uz:"Kirish",ru:"Войти",en:"Login"},"header.register":{uz:"Ro'yxatdan o'tish",ru:"Регистрация",en:"Register"},"header.cart":{uz:"Korzinka",ru:"Корзина",en:"Cart"},"cart.title":{uz:"Korzinka",ru:"Корзина",en:"Cart"},"cart.empty":{uz:"Korzinka bo'sh",ru:"Корзина пуста",en:"Cart is empty"},"cart.empty_desc":{uz:"Mahsulotlar qo'shish uchun katalogga o'ting",ru:"Перейдите в каталог, чтобы добавить товары",en:"Go to catalog to add products"},"cart.go_to_catalog":{uz:"Katalogga o'tish",ru:"Перейти в каталог",en:"Go to Catalog"},"cart.dimensions":{uz:"O'lcham",ru:"Размер",en:"Size"},"cart.color":{uz:"Rang",ru:"Цвет",en:"Color"},"cart.total":{uz:"Jami",ru:"Итого",en:"Total"},"cart.clear":{uz:"Tozalash",ru:"Очистить",en:"Clear"},"cart.checkout":{uz:"Buyurtma berish",ru:"Оформить заказ",en:"Checkout"},"orderSuccess.title":{uz:"Buyurtma muvaffaqiyatli qabul qilindi!",ru:"Заказ успешно принят!",en:"Order Successfully Accepted!"},"orderSuccess.subtitle":{uz:"Sizning buyurtmangiz qabul qilindi va tez orada siz bilan bog'lanamiz.",ru:"Ваш заказ принят, и мы свяжемся с вами в ближайшее время.",en:"Your order has been accepted and we will contact you soon."},"orderSuccess.orderDetails":{uz:"Buyurtma ma'lumotlari",ru:"Детали заказа",en:"Order Details"},"orderSuccess.orderNumber":{uz:"Buyurtma raqami:",ru:"Номер заказа:",en:"Order Number:"},"orderSuccess.customerName":{uz:"Mijoz:",ru:"Клиент:",en:"Customer:"},"orderSuccess.phone":{uz:"Telefon:",ru:"Телефон:",en:"Phone:"},"orderSuccess.totalAmount":{uz:"Jami summa:",ru:"Общая сумма:",en:"Total Amount:"},"orderSuccess.contactInfo":{uz:"Bog'lanish ma'lumotlari",ru:"Контактная информация",en:"Contact Information"},"orderSuccess.contactText":{uz:"Bizning mutaxassislarimiz 24 soat ichida siz bilan bog'lanadi va buyurtmangizni batafsil muhokama qiladi.",ru:"Наши специалисты свяжутся с вами в течение 24 часов и подробно обсудят ваш заказ.",en:"Our specialists will contact you within 24 hours and discuss your order in detail."},"orderSuccess.goHome":{uz:"Bosh sahifaga qaytish",ru:"Вернуться на главную",en:"Return to Home"},"orderSuccess.newOrder":{uz:"Yangi buyurtma",ru:"Новый заказ",en:"New Order"},"orderSuccess.thankYou":{uz:"Eurodoor jamoasi nomidan rahmat! Sizning ishonchingiz biz uchun juda muhim.",ru:"Спасибо от команды Eurodoor! Ваше доверие очень важно для нас.",en:"Thank you from the Eurodoor team! Your trust is very important to us."},"orderSuccess.notificationTitle":{uz:"Bildirishnomalarni yoqish",ru:"Включить уведомления",en:"Enable Notifications"},"orderSuccess.notificationText":{uz:"Buyurtmangizning holati o'zgarganida sizga bildirishnoma yuboramiz. Sahifani yopib chiqib ketgan taqdirda ham xabarlarni olasiz.",ru:"Мы отправим вам уведомление при изменении статуса вашего заказа. Вы будете получать сообщения даже после закрытия страницы.",en:"We will send you a notification when your order status changes. You will receive messages even after closing the page."},"orderSuccess.enableNotifications":{uz:"Bildirishnomalarni yoqish",ru:"Включить уведомления",en:"Enable Notifications"},"orderSuccess.notificationsEnabled":{uz:"Bildirishnomalar yoqilgan",ru:"Уведомления включены",en:"Notifications Enabled"},"orderSuccess.notificationsEnabledText":{uz:"Buyurtmangizning barcha o'zgarishlari haqida sizga bildirishnoma yuboriladi.",ru:"Вам будут отправляться уведомления обо всех изменениях вашего заказа.",en:"You will receive notifications about all changes to your order."},"auth.login":{uz:"Kirish",ru:"Войти",en:"Login"},"auth.register":{uz:"Ro'yxatdan o'tish",ru:"Регистрация",en:"Register"},"auth.name":{uz:"Ism",ru:"Имя",en:"Name"},"auth.phone":{uz:"Telefon raqami",ru:"Номер телефона",en:"Phone Number"},"auth.password":{uz:"Parol",ru:"Пароль",en:"Password"},"auth.confirm_password":{uz:"Parolni tasdiqlang",ru:"Подтвердите пароль",en:"Confirm Password"},"auth.name_placeholder":{uz:"Ismingizni kiriting",ru:"Введите ваше имя",en:"Enter your name"},"auth.phone_placeholder":{uz:"+998 90 123 45 67",ru:"+998 90 123 45 67",en:"+998 90 123 45 67"},"auth.password_placeholder":{uz:"Parolingizni kiriting",ru:"Введите ваш пароль",en:"Enter your password"},"auth.confirm_password_placeholder":{uz:"Parolni qayta kiriting",ru:"Повторите пароль",en:"Repeat password"},"auth.loading":{uz:"Kutilmoqda...",ru:"Ожидание...",en:"Loading..."},"auth.no_account":{uz:"Hali ro'yxatdan o'tmaganmisiz?",ru:"Еще не зарегистрированы?",en:"Don't have an account?"},"auth.have_account":{uz:"Allaqachon ro'yxatdan o'tganmisiz?",ru:"Уже зарегистрированы?",en:"Already have an account?"},"auth.register_link":{uz:"Ro'yxatdan o'ting",ru:"Зарегистрироваться",en:"Register"},"auth.login_link":{uz:"Kirish",ru:"Войти",en:"Login"},"auth.name_required":{uz:"Ism kiritish majburiy",ru:"Имя обязательно",en:"Name is required"},"auth.phone_required":{uz:"Telefon raqami kiritish majburiy",ru:"Номер телефона обязателен",en:"Phone number is required"},"auth.password_min_length":{uz:"Parol kamida 6 ta belgi bo'lishi kerak",ru:"Пароль должен содержать минимум 6 символов",en:"Password must be at least 6 characters"},"auth.passwords_not_match":{uz:"Parollar mos kelmaydi",ru:"Пароли не совпадают",en:"Passwords do not match"},"auth.login_success":{uz:"Kirish muvaffaqiyatli!",ru:"Вход успешен!",en:"Login successful!"},"auth.register_success":{uz:"Muvaffaqiyatli ro'yxatdan o'tdingiz! Endi kirishingiz mumkin.",ru:"Регистрация прошла успешно! Теперь можете войти.",en:"Registration successful! You can now login."},"auth.login_error":{uz:"Kirishda xatolik yuz berdi",ru:"Ошибка при входе",en:"Login error occurred"},"auth.register_error":{uz:"Ro'yxatdan o'tishda xatolik yuz berdi",ru:"Ошибка при регистрации",en:"Registration error occurred"},"auth.general_error":{uz:"Xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.",ru:"Произошла ошибка. Пожалуйста, попробуйте снова.",en:"An error occurred. Please try again."},"contact.title":{uz:"Biz bilan bog'laning",ru:"Свяжитесь с нами",en:"Contact Us"},"contact.description":{uz:"Sizga kerakli eshikni tanlashda yordam berish uchun biz bilan bog'laning. Mutaxassislarimiz bepul maslahat va o'lchash xizmati taklif qiladi.",ru:"Свяжитесь с нами для помощи в выборе нужной двери. Наши специалисты предлагают бесплатную консультацию и услуги по замерам.",en:"Contact us for help in choosing the right door. Our specialists offer free consultation and measurement services."},"contact.contact_form":{uz:"Aloqa formasi",ru:"Форма связи",en:"Contact Form"},"contact.contact_info":{uz:"Bog'lanish ma'lumotlari",ru:"Контактная информация",en:"Contact Information"},"contact.phone":{uz:"Telefon",ru:"Телефон",en:"Phone"},"contact.telegram":{uz:"Telegram",ru:"Telegram",en:"Telegram"},"contact.instagram":{uz:"Instagram",ru:"Instagram",en:"Instagram"},"contact.email":{uz:"Email",ru:"Email",en:"Email"},"contact.our_location":{uz:"Bizning joylashuvimiz",ru:"Наше местоположение",en:"Our Location"},"home.free_consultation":{uz:"Bepul maslahat",ru:"Бесплатная консультация",en:"Free Consultation"},"home.specialists_help":{uz:"Mutaxassislarimiz sizga kerakli eshikni tanlashda yordam beradi",ru:"Наши специалисты помогут вам выбрать нужную дверь",en:"Our specialists will help you choose the right door"},"home.contact_button":{uz:"Bog'lanish",ru:"Связаться",en:"Contact"},"catalog.title":{uz:"Katalog",ru:"Каталог",en:"Catalog"},"catalog.description":{uz:"Bizning eshik modellari katalogi",ru:"Каталог наших моделей дверей",en:"Our door models catalog"},"catalog.group_by_material":{uz:"Material bo'yicha",ru:"По материалу",en:"By Material"},"catalog.group_by_size":{uz:"O'lcham bo'yicha",ru:"По размеру",en:"By Size"},"catalog.material_metall_mdf":{uz:"Metall + MDF",ru:"Металл + МДФ",en:"Metal + MDF"},"catalog.material_mdf_mdf":{uz:"MDF + MDF",ru:"МДФ + МДФ",en:"MDF + MDF"},"catalog.material_metall_mdf_oyna":{uz:"Metall + MDF + Oyna",ru:"Металл + МДФ + Стекло",en:"Metal + MDF + Glass"},"catalog.material_metall_metall":{uz:"Metall + Metall",ru:"Металл + Металл",en:"Metal + Metal"},"catalog.material_metall_kompozit":{uz:"Metall + Kompozit",ru:"Металл + Композит",en:"Metal + Composite"},"catalog.material_other":{uz:"Boshqa materiallar",ru:"Другие материалы",en:"Other Materials"},"catalog.size_2050_series":{uz:"2050 seriyasi",ru:"Серия 2050",en:"2050 Series"},"catalog.size_2100_series":{uz:"2100 seriyasi",ru:"Серия 2100",en:"2100 Series"},"catalog.size_2300_series":{uz:"2300 seriyasi",ru:"Серия 2300",en:"2300 Series"},"catalog.size_other":{uz:"Boshqa o'lchamlar",ru:"Другие размеры",en:"Other Sizes"},"catalog.view_details":{uz:"Batafsil",ru:"Подробнее",en:"View Details"},"catalog.opening":{uz:"Ochilmoqda...",ru:"Открывается...",en:"Opening..."},"about.title":{uz:"Biz haqimizda",ru:"О нас",en:"About Us"},"about.description":{uz:"Eurodoor - eshiklar sohasida 10 yildan ortiq tajribaga ega kompaniya",ru:"Eurodoor - компания с более чем 10-летним опытом в области дверей",en:"Eurodoor - a company with more than 10 years of experience in doors"},"about.experience":{uz:"Yillik tajriba",ru:"Лет опыта",en:"Years of Experience"},"about.customers":{uz:"Mamnun mijozlar",ru:"Довольных клиентов",en:"Satisfied Customers"},"about.models":{uz:"Eshik modellari",ru:"Моделей дверей",en:"Door Models"},"about.mission":{uz:"Bizning missiyamiz",ru:"Наша миссия",en:"Our Mission"},"about.mission_text":{uz:"Har bir mijozga eng yaxshi eshik yechimini taqdim etish",ru:"Предоставить каждому клиенту лучшее дверное решение",en:"Provide every customer with the best door solution"},"about.doors_description":{uz:"Bizning eshiklar yuqori sifatli materiallardan tayyorlanadi",ru:"Наши двери изготавливаются из высококачественных материалов",en:"Our doors are made from high-quality materials"},"about.customer_needs":{uz:"Har bir mijozning ehtiyojlarini hisobga olgan holda",ru:"Учитывая потребности каждого клиента",en:"Taking into account the needs of each customer"},"about.security":{uz:"Xavfsizlik",ru:"Безопасность",en:"Security"},"about.highest_security":{uz:"Eng yuqori darajadagi xavfsizlik",ru:"Высший уровень безопасности",en:"Highest level of security"},"about.certificates_standards":{uz:"Sertifikatlar va standartlar",ru:"Сертификаты и стандарты",en:"Certificates and Standards"},"about.international_standards":{uz:"Xalqaro standartlar bo'yicha sertifikatlangan",ru:"Сертифицировано по международным стандартам",en:"Certified to international standards"},"about.gost_cert":{uz:"GOST sertifikati",ru:"Сертификат ГОСТ",en:"GOST Certificate"},"about.ce_mark":{uz:"CE belgisi",ru:"Маркировка CE",en:"CE Mark"},"about.fire_cert":{uz:"Yong'in xavfsizligi sertifikati",ru:"Сертификат пожарной безопасности",en:"Fire Safety Certificate"},"about.partnership":{uz:"Hamkorlik",ru:"Партнерство",en:"Partnership"},"about.partnership_desc":{uz:"Biz bilan hamkorlik qiling va biznesingizni rivojlantiring",ru:"Сотрудничайте с нами и развивайте свой бизнес",en:"Partner with us and grow your business"},"about.contact_info":{uz:"Bog'lanish ma'lumotlari",ru:"Контактная информация",en:"Contact Information"},"contact.our_services":{uz:"Bizning xizmatlarimiz",ru:"Наши услуги",en:"Our Services"},"contact.services_desc":{uz:"Biz sizga to'liq xizmat ko'rsatamiz",ru:"Мы предоставляем вам полный спектр услуг",en:"We provide you with a full range of services"},"contact.free_consultation":{uz:"Bepul maslahat",ru:"Бесплатная консультация",en:"Free Consultation"},"contact.free_consultation_desc":{uz:"Mutaxassislarimizdan bepul maslahat oling",ru:"Получите бесплатную консультацию от наших специалистов",en:"Get free consultation from our specialists"},"contact.free_measurement":{uz:"Bepul o'lchash",ru:"Бесплатный замер",en:"Free Measurement"},"contact.free_measurement_desc":{uz:"Uyingizga bepul o'lchash xizmati",ru:"Бесплатная услуга замера на дому",en:"Free home measurement service"},"contact.fast_installation":{uz:"Tez o'rnatish",ru:"Быстрая установка",en:"Fast Installation"},"contact.fast_installation_desc":{uz:"Professional o'rnatish xizmati",ru:"Профессиональная услуга установки",en:"Professional installation service"},"contact.address":{uz:"Manzil",ru:"Адрес",en:"Address"},"contact.address_detail":{uz:"Toshkent shahar, Chilonzor tumani",ru:"Город Ташкент, Чиланзарский район",en:"Tashkent city, Chilanzar district"},"contact.working_hours":{uz:"Ish vaqti",ru:"Время работы",en:"Working Hours"},"contact.back_to_product":{uz:"Mahsulotga qaytish",ru:"Вернуться к товару",en:"Back to Product"},"contact.cart_items":{uz:"Korzinkadagi mahsulotlar",ru:"Товары в корзине",en:"Cart Items"},"contact.selected_product":{uz:"Tanlangan mahsulot",ru:"Выбранный товар",en:"Selected Product"},"contact.dimensions":{uz:"O'lcham",ru:"Размер",en:"Dimensions"},"contact.color":{uz:"Rang",ru:"Цвет",en:"Color"},"contact.quantity":{uz:"Miqdor",ru:"Количество",en:"Quantity"},"contact.total":{uz:"Jami",ru:"Итого",en:"Total"},"contact.material":{uz:"Material",ru:"Материал",en:"Material"},"contact.security":{uz:"Xavfsizlik",ru:"Безопасность",en:"Security"},"contact.price":{uz:"Narx",ru:"Цена",en:"Price"},"contact.order_form":{uz:"Buyurtma formasi",ru:"Форма заказа",en:"Order Form"},"contact.name_placeholder":{uz:"Ismingiz",ru:"Ваше имя",en:"Your Name"},"contact.phone_placeholder":{uz:"Telefon raqamingiz",ru:"Ваш номер телефона",en:"Your Phone Number"},"contact.email_placeholder":{uz:"Email manzilingiz",ru:"Ваш email адрес",en:"Your Email Address"},"contact.delivery_address_placeholder":{uz:"Yetkazib berish manzili",ru:"Адрес доставки",en:"Delivery Address"},"contact.sending":{uz:"Yuborilmoqda...",ru:"Отправка...",en:"Sending..."},"contact.place_order":{uz:"Buyurtma berish",ru:"Разместить заказ",en:"Place Order"},"contact.send_message":{uz:"Xabar yuborish",ru:"Отправить сообщение",en:"Send Message"},"contact.address_street":{uz:"Bunyodkor ko'chasi, 1-uy",ru:"Улица Бунёдкор, дом 1",en:"Bunyodkor street, house 1"},"contact.working_hours_weekdays":{uz:"Dushanba - Shanba: 9:00 - 19:00",ru:"Понедельник - Суббота: 9:00 - 19:00",en:"Monday - Saturday: 9:00 - 19:00"},"contact.working_hours_weekend":{uz:"Yakshanba: 10:00 - 17:00",ru:"Воскресенье: 10:00 - 17:00",en:"Sunday: 10:00 - 17:00"},"contact.telegram_handle":{uz:"@eurodoor_uz",ru:"@eurodoor_uz",en:"@eurodoor_uz"},"contact.instagram_handle":{uz:"@eurodoor.uz",ru:"@eurodoor.uz",en:"@eurodoor.uz"},"contact.email_address":{uz:"info@eurodoor.uz",ru:"info@eurodoor.uz",en:"info@eurodoor.uz"},"contact.product_placeholder":{uz:"Mahsulot haqida qo'shimcha ma'lumot",ru:"Дополнительная информация о продукте",en:"Additional product information"},"contact.message_placeholder":{uz:"Xabaringizni yozing...",ru:"Напишите ваше сообщение...",en:"Write your message..."},"contact.send_button":{uz:"Xabar yuborish",ru:"Отправить сообщение",en:"Send Message"},"product.back_to_catalog":{uz:"Katalogga qaytish",ru:"Вернуться в каталог",en:"Back to Catalog"},"product.price":{uz:"Narx",ru:"Цена",en:"Price"},"product.ask_for_price":{uz:"Narxni so'rang",ru:"Узнать цену",en:"Ask for Price"},"product.contact_for_price":{uz:"Narx uchun aloqa qiling",ru:"Свяжитесь для цены",en:"Contact for Price"},"product.technical_specs":{uz:"Texnik xususiyatlar",ru:"Технические характеристики",en:"Technical Specifications"},"product.material":{uz:"Material",ru:"Материал",en:"Material"},"product.security":{uz:"Xavfsizlik",ru:"Безопасность",en:"Security"},"product.dimensions":{uz:"O'lchamlar",ru:"Размеры",en:"Dimensions"},"product.thickness":{uz:"Qalinlik",ru:"Толщина",en:"Thickness"},"product.lock":{uz:"Qulf",ru:"Замок",en:"Lock"},"product.features":{uz:"Xususiyatlar",ru:"Особенности",en:"Features"},"product.galvanized_body":{uz:"Galvanizlangan korpus",ru:"Оцинкованный корпус",en:"Galvanized Body"},"product.heat_sound_insulation":{uz:"Issiqlik va tovush izolyatsiyasi",ru:"Тепло- и звукоизоляция",en:"Heat and Sound Insulation"},"product.uv_resistant_paint":{uz:"UV chidamli bo'yoq",ru:"УФ-стойкая краска",en:"UV Resistant Paint"},"product.add_to_cart":{uz:"Korzinkaga qo'shish",ru:"Добавить в корзину",en:"Add to Cart"},"product.quantity":{uz:"Miqdor:",ru:"Количество:",en:"Quantity:"},"product.size":{uz:"O'lcham:",ru:"Размер:",en:"Size:"},"product.color":{uz:"Rang:",ru:"Цвет:",en:"Color:"},"product.standard_size":{uz:"Standart o'lcham",ru:"Стандартный размер",en:"Standard size"},"product.standard_color":{uz:"Standart rang",ru:"Стандартный цвет",en:"Standard color"},"product.custom_size":{uz:"Boshqa o'lcham",ru:"Другой размер",en:"Custom size"},"product.size_placeholder":{uz:"Masalan: 1900x750",ru:"Например: 1900x750",en:"Example: 1900x750"},"product.color_white":{uz:"Oq",ru:"Белый",en:"White"},"product.color_black":{uz:"Qora",ru:"Черный",en:"Black"},"product.color_gray":{uz:"Kulrang",ru:"Серый",en:"Gray"},"product.color_brown":{uz:"Jigarrang",ru:"Коричневый",en:"Brown"},"home.why_eurodoor":{uz:"Nima uchun Eurodoor?",ru:"Почему Eurodoor?",en:"Why Eurodoor?"},"home.experience_text":{uz:"Bizning tajribamiz va sifatimiz bilan eshiklar olamida yangi standartlar o'rnatamiz",ru:"Мы устанавливаем новые стандарты в мире дверей с нашим опытом и качеством",en:"We set new standards in the world of doors with our experience and quality"}},ue=n.createContext(void 0);function De({children:o}){const[r,s]=n.useState("uz");n.useEffect(()=>{const g=localStorage.getItem("selectedLanguage");g&&["uz","ru","en"].includes(g)?s(g):s("uz")},[]);const l={language:r,t:g=>Me[g]?.[r]||g,changeLanguage:g=>{localStorage.setItem("selectedLanguage",g),s(g),console.log("Language changed to:",g)}};return e.jsx(ue.Provider,{value:l,children:o})}function B(){const o=n.useContext(ue);if(o===void 0)throw new Error("useLanguage must be used within a LanguageProvider");return o}const de=n.createContext(void 0),he=()=>{const o=n.useContext(de);if(!o)throw new Error("useCart must be used within a CartProvider");return o},Ae=({children:o})=>{const[r,s]=n.useState([]),[c,t]=n.useState(!1);n.useEffect(()=>{const i=localStorage.getItem("eurodoor-cart");if(i)try{s(JSON.parse(i))}catch(f){console.error("Korzinka ma'lumotlarini yuklashda xatolik:",f)}},[]),n.useEffect(()=>{localStorage.setItem("eurodoor-cart",JSON.stringify(r))},[r]);const l=i=>{s(f=>{const d=f.find(h=>h.id===i.id&&h.dimensions===i.dimensions&&h.color===i.color);return d?f.map(h=>h.id===d.id?{...h,quantity:h.quantity+1}:h):[...f,{...i,quantity:1}]})},g=i=>{s(f=>f.filter(d=>d.id!==i))},b=(i,f)=>{if(f<=0){g(i);return}s(d=>d.map(h=>h.id===i?{...h,quantity:f}:h))},p=()=>{s([])},x=r.reduce((i,f)=>i+f.quantity,0),k=r.reduce((i,f)=>i+f.price*f.quantity,0),u={items:r,totalItems:x,totalPrice:k,addToCart:l,removeFromCart:g,updateQuantity:b,clearCart:p,isCartOpen:c,setIsCartOpen:t};return e.jsx(de.Provider,{value:u,children:o})},Le="https://oathybjrmhtubbemjeyy.supabase.co",Re="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9hdGh5YmpybWh0dWJiZW1qZXl5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MjMzOTIsImV4cCI6MjA3Mjk5OTM5Mn0.GlKHHQj1nhDGwF78Fr7zlKytRxEwXwlyRTlgEX6d4io",j=ze(Le,Re,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"eurodoor-customer-panel"}}}),Be={},te=Be?.VITE_VAPID_PUBLIC_KEY||"BDKmEIAbWtoGMgyNKmKljaJVofmw81mqRz54IMqBRH0JZcdGCSG2pBfSM_cqfHRVGIvBzgw9Imm7Gqnp1eGVWUU";function Fe(o){const r="=".repeat((4-o.length%4)%4),s=(o+r).replace(/-/g,"+").replace(/_/g,"/"),c=atob(s);return Uint8Array.from([...c].map(t=>t.charCodeAt(0)))}function Ue(){return window.matchMedia?.("(display-mode: standalone)")?.matches??!1}function L(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}function U(){const o=H(),r=localStorage.getItem("notif:asked"),s=!!o;return console.log("🔔 shouldAskForNotifications check:",{isPushSupported:L(),permission:Notification.permission,hasAsked:r,isAuthenticated:s,userId:o}),L()&&Notification.permission==="default"&&!r&&s}function W(){try{localStorage.setItem("notif:asked","1")}catch{}}function H(){try{return localStorage.getItem("user:id")}catch{return null}}function T(o){try{localStorage.setItem("user:id",o)}catch{}}async function We(){if(!("serviceWorker"in navigator))throw new Error("SW not supported");return navigator.serviceWorker.register("/sw.js",{scope:"/"})}async function K(o){if(console.log("🔔 Starting push subscription process for user:",o),!L())throw console.error("❌ Push not supported"),new Error("Push not supported");console.log("🔔 Checking user authentication...");const{data:{session:r}}=await j.auth.getSession();if(!r||!r.user)throw console.error("❌ User not authenticated"),new Error("User not authenticated");console.log("✅ User is authenticated:",r.user.id),console.log("🔔 Requesting notification permission...");const s=await Notification.requestPermission();if(s!=="granted")throw console.error("❌ Permission denied:",s),new Error("Permission denied");console.log("✅ Notification permission granted"),console.log("🔔 Registering service worker...");const c=await We();console.log("✅ Service worker registered:",c.scope),console.log("🔔 Creating push subscription with VAPID key:",te);let t;try{t=await c.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Fe(te)}),console.log("✅ Push subscription created:",t.endpoint)}catch(l){throw console.error("❌ Push subscription failed:",l),new Error(`Push subscription failed: ${l}`)}console.log("[EURODOOR] Push endpoint:",t.endpoint),console.log("📤 Sending subscription to server...");try{console.log("🔔 Saving subscription to Supabase...");const l={user_id:o,subscription:t.toJSON(),created_at:new Date().toISOString()};console.log("📋 Subscription data:",l);const{data:g,error:b}=await j.from("push_subscriptions").upsert(l,{onConflict:"user_id"});if(b)throw console.error("❌ Subscription save error:",b),console.error("❌ Error details:",{message:b.message,code:b.code,details:b.details,hint:b.hint}),b;return console.log("✅ Subscription saved:",g),g}catch(l){throw console.error("❌ Subscription save error:",l),l}}const me=n.createContext(void 0),G=()=>{const o=n.useContext(me);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o},He=({children:o})=>{const[r,s]=n.useState(null),[c,t]=n.useState(!0),l=async u=>{try{console.log("🔍 Checking customer existence for ID:",u);const{data:i,error:f}=await j.from("customers").select("id, name, email").eq("id",u).single();return console.log("📤 Customer existence check response:",{data:i,error:f}),f||!i?(console.log("🚫 Customer not found in database, signing out..."),console.log("🚫 Error details:",f),await j.auth.signOut(),s(null),!1):(console.log("✅ Customer found in database:",i),!0)}catch(i){return console.error("❌ Error checking customer existence:",i),!1}};n.useEffect(()=>{(async()=>{try{const{data:{session:d}}=await j.auth.getSession();if(d?.user&&(console.log("🔍 Initial session check for user:",d.user.id),await l(d.user.id))){const a={id:d.user.id,email:d.user.email||"",name:d.user.user_metadata?.name,phone:d.user.user_metadata?.phone,created_at:d.user.created_at};s(a),T(d.user.id)}}catch(d){console.error("Session olishda xatolik:",d)}finally{t(!1)}})();const{data:{subscription:i}}=j.auth.onAuthStateChange(async(d,h)=>{if(console.log("🔄 Auth state change:",d,h?.user?.id),d==="SIGNED_OUT"){console.log("🚪 User signed out, clearing user state"),s(null),T(""),t(!1);return}if(h?.user)if(d==="SIGNED_IN"){if(console.log("🔍 Auth state change - checking customer for:",h.user.id),await l(h.user.id)){const m={id:h.user.id,email:h.user.email||"",name:h.user.user_metadata?.name,phone:h.user.user_metadata?.phone,created_at:h.user.created_at};s(m),T(h.user.id),setTimeout(()=>{console.log("🔔 User logged in, checking for notification permission...")},1e3)}}else{const a={id:h.user.id,email:h.user.email||"",name:h.user.user_metadata?.name,phone:h.user.user_metadata?.phone,created_at:h.user.created_at};s(a),T(h.user.id)}else s(null);t(!1)}),f=j.channel("customer-deletion").on("postgres_changes",{event:"DELETE",schema:"public",table:"customers"},async d=>{console.log("🗑️ Customer deleted in real-time:",d.old),r&&r.id===d.old.id&&(console.log("🚫 Current user was deleted, signing out..."),await j.auth.signOut(),s(null))}).subscribe();return()=>{i.unsubscribe(),f.unsubscribe()}},[]);const k={user:r,loading:c,signUp:async(u,i,f,d)=>{try{t(!0),console.log("🚀 Starting signup process for:",{email:u,name:f,phone:d});const{data:h,error:a}=await j.auth.signUp({email:u,password:i,options:{data:{name:f,phone:d},emailRedirectTo:void 0}});if(console.log("📤 Supabase signup response:",{data:h,error:a}),a){if(console.error("❌ Signup error:",a),a.message.includes("already registered")||a.message.includes("User already registered")){console.log("🔄 User already exists, syncing with customers table..."),console.log("🔐 Attempting to sign in existing user...");const{data:m,error:N}=await j.auth.signInWithPassword({email:u,password:i});if(console.log("📤 Sign in response:",{existingUser:m,getUserError:N}),m?.user){console.log("👤 Found existing user:",m.user.id);const v={id:m.user.id,name:f||m.user.user_metadata?.name||"",phone:d||m.user.user_metadata?.phone||"",email:u};console.log("📋 Customer data to sync:",v),console.log("🔍 Checking if customer already exists in customers table...");const P=j.from("customers").select("id").eq("id",m.user.id).single(),_=new Promise((z,y)=>setTimeout(()=>y(new Error("Customer check timeout")),1e4)),{data:E,error:S}=await Promise.race([P,_]);if(console.log("📤 Customer existence check:",{existingCustomer:E,checkError:S}),S&&S.code==="PGRST116"){console.log("📝 Customer not found, inserting new customer...");const{data:z,error:y}=await j.from("customers").insert([v]).select();return console.log("📤 Insert response:",{insertResult:z,insertError:y}),y?(console.error("❌ Insert failed:",y),t(!1),{success:!1,error:"Mijoz ma'lumotlarini saqlashda xatolik"}):(console.log("✅ Customer inserted successfully:",z),t(!1),{success:!0})}else if(E){console.log("📝 Customer exists, updating customer data...");const{data:z,error:y}=await j.from("customers").update({name:v.name,phone:v.phone,email:v.email}).eq("id",m.user.id).select();return console.log("📤 Update response:",{updateResult:z,updateError:y}),y?(console.error("❌ Update failed:",y),t(!1),{success:!1,error:"Mijoz ma'lumotlarini yangilashda xatolik"}):(console.log("✅ Customer updated successfully:",z),t(!1),{success:!0})}else if(S&&S.message==="Customer check timeout"){console.error("❌ Customer check timeout, proceeding with insert..."),console.log("📝 Timeout occurred, inserting customer directly...");const{data:z,error:y}=await j.from("customers").insert([v]).select();return console.log("📤 Direct insert response:",{insertResult:z,insertError:y}),y?(console.error("❌ Direct insert failed:",y),t(!1),{success:!1,error:"Mijoz ma'lumotlarini saqlashda xatolik"}):(console.log("✅ Customer inserted successfully after timeout:",z),t(!1),{success:!0})}else{console.error("❌ Unexpected error checking customer existence:",S),console.log("🔄 Fallback: inserting customer directly...");const{data:z,error:y}=await j.from("customers").insert([v]).select();return console.log("📤 Fallback insert response:",{fallbackResult:z,fallbackError:y}),y?(console.error("❌ Fallback insert also failed:",y),t(!1),{success:!1,error:"Mijoz ma'lumotlarini saqlashda xatolik"}):(console.log("✅ Customer inserted via fallback:",z),t(!1),{success:!0})}}else return console.error("❌ Could not sign in existing user:",N),t(!1),{success:!1,error:"Foydalanuvchi mavjud, lekin parol noto'g'ri"}}return console.log("❌ Signup failed, setting loading to false"),t(!1),{success:!1,error:a.message}}if(h.user){console.log("👤 User created successfully:",h.user.id);try{console.log("📝 Adding customer to customers table...");const v={id:h.user.id,name:f||"",phone:d||"",email:u};console.log("📋 Customer data to insert:",v);const{data:P,error:_}=await j.from("customers").insert([v]).select();if(console.log("📤 Customer insert response:",{customerResult:P,customerError:_}),_){console.error("❌ Customer creation error:",_),console.error("❌ Error details:",{message:_.message,code:_.code,details:_.details,hint:_.hint}),console.log("🔄 Attempting fallback with upsert...");const{data:E,error:S}=await j.from("customers").upsert([v],{onConflict:"id"}).select();S?console.error("❌ Upsert also failed:",S):console.log("✅ Customer upserted successfully:",E)}else console.log("✅ Customer added to customers table successfully:",P)}catch(v){console.error("❌ Error adding customer to table:",v)}console.log("🔐 Attempting auto sign-in...");const{data:m,error:N}=await j.auth.signInWithPassword({email:u,password:i});console.log("📤 Auto sign-in response:",{signInData:m,signInError:N}),N?console.error("❌ Auto sign-in error:",N):(console.log("✅ User auto-signed in successfully"),setTimeout(()=>{console.log("🔔 User signed up, checking for notification permission...")},1e3))}return{success:!0}}catch(h){return console.error("❌ Signup error:",h),{success:!1,error:h.message||"Ro'yxatdan o'tishda xatolik yuz berdi"}}finally{t(!1)}},signIn:async(u,i)=>{try{t(!0);const{error:f}=await j.auth.signInWithPassword({email:u,password:i});if(f){if(f.message.includes("Email not confirmed")||f.message.includes("email_not_confirmed"))try{const{error:d}=await j.auth.updateUser({data:{email_confirmed:!0}});if(!d){const{error:h}=await j.auth.signInWithPassword({email:u,password:i});if(!h)return{success:!0}}}catch(d){console.error("Update error:",d)}return{success:!1,error:f.message}}return{success:!0}}catch{return{success:!1,error:"Kirishda xatolik yuz berdi"}}finally{t(!1)}},signOut:async()=>{try{t(!0),console.log("🚪 Signing out user..."),await j.auth.signOut(),s(null),T(""),console.log("✅ User signed out successfully")}catch(u){console.error("❌ Chiqishda xatolik:",u)}finally{t(!1)}},updateProfile:async u=>{try{if(!r)return{success:!1,error:"Foydalanuvchi topilmadi"};const{error:i}=await j.auth.updateUser({data:u});return i?{success:!1,error:i.message}:(s(f=>f?{...f,...u}:null),{success:!0})}catch{return{success:!1,error:"Profil yangilashda xatolik"}}}};return e.jsx(me.Provider,{value:k,children:o})},Ke=({id:o,type:r,title:s,message:c,duration:t=3e3,onClose:l})=>{n.useEffect(()=>{const p=setTimeout(()=>{l(o)},t);return()=>clearTimeout(p)},[o,t,l]);const g=()=>{switch(r){case"success":return e.jsx(V,{className:"h-5 w-5 text-green-400"});case"error":return e.jsx(D,{className:"h-5 w-5 text-red-400"});case"info":return e.jsx(M,{className:"h-5 w-5 text-blue-400"});default:return e.jsx(V,{className:"h-5 w-5 text-green-400"})}},b=()=>{switch(r){case"success":return"bg-green-500/20 border-green-500/30";case"error":return"bg-red-500/20 border-red-500/30";case"info":return"bg-blue-500/20 border-blue-500/30";default:return"bg-green-500/20 border-green-500/30"}};return e.jsx(C.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:`${b()} backdrop-blur-lg border rounded-xl p-4 shadow-xl max-w-sm w-full`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:g()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-white font-semibold text-sm",children:s}),c&&e.jsx("p",{className:"text-gray-300 text-xs mt-1",children:c})]}),e.jsx("button",{onClick:()=>l(o),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:e.jsx(D,{className:"h-4 w-4"})})]})})},Ge=({toasts:o,onClose:r})=>e.jsx("div",{className:"fixed top-4 right-4 z-[10000] space-y-2",children:e.jsx(O,{children:o.map(s=>e.jsx(C.div,{layout:!0,initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},children:e.jsx(Ke,{...s,onClose:r})},s.id))})}),ge=n.createContext(void 0),fe=()=>{const o=n.useContext(ge);if(!o)throw new Error("useToast must be used within a ToastProvider");return o},Ve=({children:o})=>{const[r,s]=n.useState([]),c=x=>{const k=Math.random().toString(36).substr(2,9),u={...x,id:k,onClose:t};s(i=>[...i,u])},t=x=>{s(k=>k.filter(u=>u.id!==x))},p={showToast:c,showSuccess:(x,k)=>{c({type:"success",title:x,message:k})},showError:(x,k)=>{c({type:"error",title:x,message:k})},showInfo:(x,k)=>{c({type:"info",title:x,message:k})}};return e.jsxs(ge.Provider,{value:p,children:[o,e.jsx(Ge,{toasts:r,onClose:t})]})};function re(){const{language:o,changeLanguage:r}=B(),[s,c]=n.useState(!1),t=n.useRef(null),l=[{code:"uz",name:"O'zbek",flag:"🇺🇿"},{code:"ru",name:"Русский",flag:"🇷🇺"},{code:"en",name:"English",flag:"🇺🇸"}],g=l.find(p=>p.code===o),b=l.filter(p=>p.code!==o);return n.useEffect(()=>{const p=x=>{t.current&&!t.current.contains(x.target)&&c(!1)};return s&&document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[s]),e.jsxs("div",{className:"flex items-center space-x-4",ref:t,children:[e.jsx("button",{onClick:()=>c(!s),className:"flex items-center text-white hover:text-gray-300 transition-colors",children:e.jsx("span",{className:"text-sm font-medium",children:g?.name})}),e.jsx(O,{children:s&&e.jsx(C.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.3},className:"flex items-center space-x-4 overflow-hidden",children:b.map((p,x)=>e.jsx(C.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1,duration:.2},onClick:()=>{r(p.code),c(!1)},className:"flex items-center space-x-1 text-white hover:text-gray-300 transition-colors",children:e.jsx("span",{className:"text-xs whitespace-nowrap",children:p.name})},p.code))})})]})}function Ye({onNavigate:o}){const{items:r,totalItems:s,totalPrice:c,updateQuantity:t,removeFromCart:l,clearCart:g,isCartOpen:b,setIsCartOpen:p}=he(),{t:x}=B();n.useEffect(()=>{const i=document.querySelector("header");i&&(b?i.classList.remove("backdrop-blur-sm"):i.classList.add("backdrop-blur-sm"))},[b]);const k=i=>new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(i),u=()=>{p(!1),o("contact")};return e.jsx(O,{children:b&&e.jsxs(e.Fragment,{children:[e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(!1),className:"fixed inset-0 bg-black/30 cart-backdrop-blur z-[9998]",style:{backdropFilter:"blur(8px) !important",WebkitBackdropFilter:"blur(8px) !important"}}),e.jsxs(C.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},className:"fixed right-0 top-0 h-screen w-full md:w-2/5 bg-black/30 cart-modal-blur shadow-2xl z-[9999] flex flex-col border-l border-white/30",style:{backdropFilter:"blur(24px) saturate(150%) !important",WebkitBackdropFilter:"blur(24px) saturate(150%) !important"},children:[e.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-white/20",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[x("cart.title")," (",s,")"]}),e.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(D,{className:"h-5 w-5 text-white/80"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(ve,{className:"h-16 w-16 text-white/50 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:x("cart.empty")}),e.jsx("p",{className:"text-white/70 mb-6",children:x("cart.empty_desc")}),e.jsx("button",{onClick:()=>{p(!1),o("catalog")},className:"px-6 py-3 bg-gradient-to-r from-blue-500/30 to-purple-500/30 text-white rounded-xl hover:from-blue-500/40 hover:to-purple-500/40 transition-all duration-300 border border-blue-500/50 shadow-lg hover:shadow-xl transform hover:scale-105",children:x("cart.go_to_catalog")})]}):e.jsx("div",{className:"space-y-4",children:r.map(i=>e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center space-x-4 p-4 bg-gradient-to-br from-black/40 to-black/20 cart-item-blur rounded-xl border border-white/30 hover:border-blue-500/50 transition-all duration-300",children:[e.jsx(ce,{src:i.image,alt:i.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-white truncate",children:i.name}),i.dimensions&&e.jsxs("p",{className:"text-xs text-white/70",children:[x("cart.dimensions"),": ",i.dimensions]}),i.color&&e.jsxs("p",{className:"text-xs text-white/70",children:[x("cart.color"),": ",i.color]}),e.jsx("p",{className:"text-sm font-semibold text-blue-300",children:k(i.price)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>t(i.id,i.quantity-1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(je,{className:"h-4 w-4 text-white"})}),e.jsx("span",{className:"w-8 text-center text-sm font-medium text-white",children:i.quantity}),e.jsx("button",{onClick:()=>t(i.id,i.quantity+1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(ke,{className:"h-4 w-4 text-white"})}),e.jsx("button",{onClick:()=>l(i.id),className:"p-1 hover:bg-red-500/20 rounded-full transition-colors ml-2",children:e.jsx(_e,{className:"h-4 w-4 text-red-400"})})]})]},`${i.id}-${i.dimensions}-${i.color}`))})}),r.length>0&&e.jsxs("div",{className:"border-t border-white/20 p-8 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-lg font-semibold text-white",children:[x("cart.total"),":"]}),e.jsx("span",{className:"text-xl font-bold text-blue-300",children:k(c)})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:g,className:"flex-1 px-4 py-2 border border-white/30 text-white rounded-xl hover:bg-white/20 transition-all duration-300",children:x("cart.clear")}),e.jsx("button",{onClick:u,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/30 to-purple-500/30 text-white rounded-xl hover:from-blue-500/40 hover:to-purple-500/40 transition-all duration-300 border border-blue-500/50 shadow-lg hover:shadow-xl transform hover:scale-105",children:x("cart.checkout")})]})]})]})]})})}async function Je(){try{console.log("🧪 Testing push notification...");const{data:o,error:r}=await j.functions.invoke("test-push-notification",{body:{}});if(r)throw console.error("❌ Test push notification failed:",r),r;return console.log("✅ Test push notification sent:",o),o}catch(o){throw console.error("❌ Error testing push notification:",o),o}}function Xe({currentPage:o,onNavigate:r,onShowAuthModal:s}){const[c,t]=n.useState(!1),[l,g]=n.useState(!1),[b,p]=n.useState(!1),[x,k]=n.useState(!1),{t:u}=B(),{totalItems:i,isCartOpen:f,setIsCartOpen:d}=he(),{user:h,signOut:a}=G(),{showSuccess:m,showError:N}=fe(),v=async()=>{try{console.log("🔔 Manual test notification triggered"),console.log("🔔 Permission status:",Notification.permission),console.log("🔔 Is supported:","Notification"in window),"Notification"in window&&Notification.permission==="granted"?(new Notification("🔔 Test Notification",{body:"Bu test notification. Agar ko'rsangiz, notification ishlayapti!",icon:"/favicon.ico",tag:"test-notification-"+Date.now()}),m("Test notification yuborildi!")):N("Notification permission yo'q")}catch(w){console.error("Test notification error:",w)}},P=async()=>{try{console.log("🧪 Manual test push notification triggered"),await Je(),m("Test push notification yuborildi!")}catch(w){console.error("Test push notification error:",w),N("Test push notification xatosi: "+w.message)}},_=async()=>{try{if(!h){N("Iltimos, avval tizimga kiring");return}if(!L()){N("Push notifications qo'llab-quvvatlanmaydi");return}console.log("🔔 Enabling push notifications..."),await K(h.id),m("Push notifications yoqildi!")}catch(w){console.error("Enable push notification error:",w),N("Push notification xatosi: "+w.message)}};n.useEffect(()=>{const w=window.Telegram?.WebApp||window.location.href.includes("t.me")||window.location.href.includes("telegram.me")||navigator.userAgent.includes("TelegramBot");k(!!w)},[]),n.useEffect(()=>(c?(document.body.classList.add("overflow-hidden"),document.body.style.overflow="hidden"):(document.body.classList.remove("overflow-hidden"),document.body.style.overflow="auto"),()=>{document.body.classList.remove("overflow-hidden"),document.body.style.overflow="auto"}),[c]),n.useEffect(()=>{const w=I=>{I.ctrlKey&&I.shiftKey&&I.key==="A"&&(I.preventDefault(),g(!l))};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[l]);const[,E]=n.useState(0),S=()=>{E(w=>{const I=w+1;return I>=5?(g(!l),0):(setTimeout(()=>E(0),3e3),I)})},z=[{name:u("nav.catalog"),id:"catalog"},{name:u("nav.about"),id:"about"},{name:u("nav.contact"),id:"contact"},{name:u("nav.blog"),id:"blog"},...l?[{name:"Admin",id:"admin"}]:[]],y={hidden:{opacity:0,y:-20,scale:.95},show:{opacity:1,y:0,scale:1,transition:{type:"tween",ease:"easeOut",duration:.3,staggerChildren:.05,when:"beforeChildren"}},exit:{opacity:0,y:-5,scale:.98,transition:{duration:.4,ease:"easeInOut",staggerChildren:.03,when:"afterChildren"}}},xe={hidden:{opacity:0,y:10,scale:.9},show:{opacity:1,y:0,scale:1,transition:{type:"tween",ease:"easeOut",duration:.25}},exit:{opacity:0,y:3,scale:.95,transition:{duration:.3,ease:"easeInOut"}}},be={hidden:{opacity:0,y:-12},show:{opacity:1,y:0,transition:{type:"spring",stiffness:500,damping:32}}};return e.jsxs(C.header,{variants:be,initial:"hidden",animate:"show",className:`bg-white/3 backdrop-blur-sm border border-white/20 z-40 shadow-lg rounded-md overflow-visible ${x?"fixed top-0 left-0 right-0 m-4":"sticky top-0 m-4"}`,style:x?{top:"env(safe-area-inset-top, 0px)",marginTop:"env(safe-area-inset-top, 16px)",marginLeft:"env(safe-area-inset-left, 16px)",marginRight:"env(safe-area-inset-right, 16px)"}:{},children:[e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between h-20 md:h-15",children:[e.jsx("div",{onClick:w=>{w.ctrlKey||w.shiftKey?S():(r("home"),window.scrollTo({top:0,left:0,behavior:"auto"}))},className:"cursor-pointer",children:e.jsx(ce,{src:"https://iili.io/K2WCLJV.png",alt:"EURODOOR Logo",className:"h-8 w-auto"})}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[z.map(w=>{const I=o===w.id;return e.jsx("button",{onClick:()=>{r(w.id),window.scrollTo({top:0,left:0,behavior:"auto"})},"aria-current":I?"page":void 0,className:["text-sm font-medium transition-colors hover:text-white","border-b-2 border-transparent pb-1",I?"text-white border-white":"text-white"].join(" "),children:w.name},w.id)}),h?e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>p(!b),className:"flex items-center space-x-1 px-3 py-1 bg-white/10 hover:bg-white/20 text-white rounded-md transition-colors",children:[e.jsx(A,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:h.name||h.email})]}),b&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50",children:[e.jsxs("button",{onClick:()=>{p(!1),r("profile")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),u("header.profile")]}),e.jsxs("button",{onClick:()=>{p(!1),r("orders")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),u("header.orders")]}),e.jsxs("button",{onClick:()=>{p(!1),v()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("span",{className:"h-4 w-4 mr-2",children:"🔔"}),"Test Notification"]}),e.jsxs("button",{onClick:()=>{p(!1),_()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("span",{className:"h-4 w-4 mr-2",children:"🔔"}),"Enable Push Notifications"]}),e.jsxs("button",{onClick:()=>{p(!1),P()},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx("span",{className:"h-4 w-4 mr-2",children:"🧪"}),"Test Push Notification"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{p(!1),a(),m("Tizimdan chiqildi!","Muvaffaqiyatli tizimdan chiqdingiz")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),u("header.logout")]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsxs("button",{onClick:()=>s("login"),className:"flex items-center space-x-1 px-3 py-1 text-sm text-white hover:text-gray-200 transition-colors",children:[e.jsx(J,{className:"h-4 w-4"}),e.jsx("span",{children:u("header.login")})]}),e.jsxs("button",{onClick:()=>s("register"),className:"flex items-center space-x-1 px-3 py-1 bg-white/10 hover:bg-white/20 text-white rounded-md transition-colors",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:u("header.register")})]})]}),e.jsxs("button",{onClick:()=>d(!f),className:"relative p-2 text-white hover:text-gray-200 transition-colors",children:[e.jsx(M,{className:"h-6 w-6"}),i>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i})]}),e.jsx(re,{})]}),e.jsx("button",{className:"md:hidden p-2 transition-all duration-300 hover:bg-white/10 rounded-lg","aria-expanded":c,"aria-controls":"mobile-nav","data-burger-button":!0,onClick:()=>t(w=>!w),children:e.jsx(C.div,{initial:{opacity:0,rotate:-90},animate:{opacity:1,rotate:0},exit:{opacity:0,rotate:90},transition:{duration:.3,ease:"easeOut"},children:c?e.jsx(D,{className:"h-6 w-6 text-white"}):e.jsx(Ne,{className:"h-6 w-6 text-white"})},c?"close":"menu")})]}),e.jsx(O,{children:c&&e.jsx(C.div,{id:"mobile-nav",variants:y,initial:"hidden",animate:"show",exit:"exit",className:"md:hidden py-4 border-t border-white/10","data-mobile-menu":!0,children:e.jsxs("nav",{className:"flex flex-col space-y-3",children:[z.map(w=>{const I=o===w.id;return e.jsx(C.button,{variants:xe,onClick:()=>{r(w.id),t(!1),window.scrollTo({top:0,left:0,behavior:"auto"})},className:["text-left px-2 py-2 text-sm font-medium transition-colors","hover:text-white rounded-md",I?"text-white":"text-gray-300"].join(" "),children:w.name},w.id)}),e.jsxs("div",{className:"px-2 py-2 border-t border-white/10 mt-4 pt-4",children:[e.jsxs("button",{onClick:()=>{d(!f),t(!1)},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(M,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.cart")}),i>0&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:i})]}),h?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{r("profile"),t(!1)},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(A,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.profile")})]}),e.jsxs("button",{onClick:()=>{r("orders"),t(!1)},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(M,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.orders")})]}),e.jsxs("button",{onClick:()=>{a(),t(!1),m("Tizimdan chiqildi!","Muvaffaqiyatli tizimdan chiqdingiz")},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(Y,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.logout")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>{s("login"),t(!1)},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(J,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.login")})]}),e.jsxs("button",{onClick:()=>{s("register"),t(!1)},className:"flex items-center w-full px-2 py-2 text-sm font-medium text-gray-300 hover:text-white transition-colors",children:[e.jsx(X,{className:"h-5 w-5 mr-3"}),e.jsx("span",{children:u("header.register")})]})]})]}),e.jsx("div",{className:"px-2 py-2",children:e.jsx(re,{})})]})},"mobile-nav")})]}),e.jsx(Ye,{onNavigate:r})]})}function oe({isLoading:o}){const[r,s]=n.useState(1);return n.useEffect(()=>{o||s(0)},[o]),!o&&r===0?null:e.jsx(O,{children:o&&e.jsx(C.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"text-2xl font-bold mb-8 bg-gradient-to-r from-white via-blue-100 to-purple-100 bg-clip-text text-transparent",children:"Eurodoor"}),e.jsxs(C.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3},className:"relative",children:[e.jsx("div",{className:"w-16 h-16 mx-auto border-4 border-white/20 border-t-blue-400 rounded-full animate-spin"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 mx-auto border-4 border-transparent border-r-purple-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsx(C.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-white/70 mt-4 text-sm",children:"Yuklanmoqda..."})]})})})}async function se(){const o=H();if(o)try{await K(o)}catch(r){console.warn("[EURODOOR] notif enable failed",r)}finally{W()}}function pe(){if(!U())return;const o=()=>{window.removeEventListener("pointerdown",o),window.removeEventListener("touchend",o),se()};window.addEventListener("pointerdown",o,{once:!0}),window.addEventListener("touchend",o,{once:!0}),setTimeout(()=>{U()&&se()},1500)}function Ze({isOpen:o,onClose:r,mode:s,onModeChange:c}){const[t,l]=n.useState({phone:"",password:"",name:"",confirmPassword:""}),[g,b]=n.useState(!1),[p,x]=n.useState(!1),[k,u]=n.useState(""),[i,f]=n.useState(!1),{signIn:d,signUp:h}=G(),{t:a}=B(),{showSuccess:m,showError:N}=fe(),v=_=>{const{name:E,value:S}=_.target;let z=S;if(E==="phone"){const y=S.replace(/[^\d+]/g,"");y.startsWith("998")?z="+"+y:y.startsWith("+998")?z=y:y.length>0&&!y.startsWith("+")&&(z="+998"+y)}l(y=>({...y,[E]:z})),u("")},P=async _=>{_.preventDefault(),u(""),f(!0);try{if(s==="login"){const S=`${t.phone.replace(/\D/g,"")}@eurodoor.uz`,z=await d(S,t.password);z.success?(m("Tizimga kirildi!","Muvaffaqiyatli tizimga kirdingiz"),r(),l({phone:"",password:"",name:"",confirmPassword:""}),u("")):z.error?.includes("Email not confirmed")||z.error?.includes("email_not_confirmed")?(m("Tizimga kirildi!","Muvaffaqiyatli tizimga kirdingiz"),r(),l({phone:"",password:"",name:"",confirmPassword:""}),u("")):N("Xatolik",z.error||a("auth.login_error")),pe()}else{if(!t.name.trim()){u(a("auth.name_required"));return}if(!t.phone.trim()){u(a("auth.phone_required"));return}if(t.password.length<6){u(a("auth.password_min_length"));return}if(t.password!==t.confirmPassword){u(a("auth.passwords_not_match"));return}const S=`${t.phone.replace(/\D/g,"")}@eurodoor.uz`,z=await h(S,t.password,t.name,t.phone);z.success?(m("Ro'yxatdan o'tdingiz!","Muvaffaqiyatli ro'yxatdan o'tdingiz"),r(),l({phone:"",password:"",name:"",confirmPassword:""})):u(z.error||a("auth.register_error"))}}catch(E){N("Xatolik",E.message??a("auth.general_error"))}finally{f(!1)}};return o?e.jsx(O,{children:e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[10001] flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},onClick:r,children:e.jsxs(C.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl w-full max-w-md",onClick:_=>_.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:a(s==="login"?"auth.login":"auth.register")}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-full transition-colors text-white",children:e.jsx(D,{className:"h-5 w-5 text-white"})})]}),e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[k&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-md text-sm backdrop-blur-sm",children:k}),s==="register"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[a("auth.name")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:v,placeholder:a("auth.name_placeholder"),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[a("auth.phone")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),e.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:v,placeholder:a("auth.phone_placeholder"),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[a("auth.password")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),e.jsx("input",{type:g?"text":"password",name:"password",value:t.password,onChange:v,placeholder:a("auth.password_placeholder"),className:"w-full pl-10 pr-12 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:g?e.jsx($,{className:"h-5 w-5"}):e.jsx(Q,{className:"h-5 w-5"})})]})]}),s==="register"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[a("auth.confirm_password")," *"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),e.jsx("input",{type:p?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:v,placeholder:a("auth.confirm_password_placeholder"),className:"w-full pl-10 pr-12 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0}),e.jsx("button",{type:"button",onClick:()=>x(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:p?e.jsx($,{className:"h-5 w-5"}):e.jsx(Q,{className:"h-5 w-5"})})]})]}),e.jsx("button",{type:"submit",disabled:i,className:"w-full bg-white/20 backdrop-blur-sm text-white py-2 px-4 rounded-md hover:bg-white/30 focus:ring-2 focus:ring-white/50 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-white/30",children:a(i?"auth.loading":s==="login"?"auth.login":"auth.register")})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("div",{className:"text-center text-sm text-white/80",children:s==="login"?e.jsxs(e.Fragment,{children:[a("auth.no_account")," ",e.jsx("button",{onClick:()=>c("register"),className:"text-white hover:text-white/80 font-medium",children:a("auth.register_link")})]}):e.jsxs(e.Fragment,{children:[a("auth.have_account")," ",e.jsx("button",{onClick:()=>c("login"),className:"text-white hover:text-white/80 font-medium",children:a("auth.login_link")})]})})})]})})}):null}class $e extends n.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error("ErrorBoundary caught an error:",r,s),this.setState({error:r,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:e.jsx("div",{className:"max-w-md w-full mx-4",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Xatolik yuz berdi"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Kechirasiz, kutilmagan xatolik yuz berdi. Sahifani yangilab ko'ring."}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Sahifani yangilash"}),e.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Bosh sahifaga qaytish"})]}),!1]})})}):this.props.children}}function Qe(){const[o,r]=n.useState(!1),[s,c]=n.useState(!1),{user:t}=G();n.useEffect(()=>{t&&U()&&(console.log("🔔 User authenticated, showing notification gate"),r(!0)),c(!Ue())},[t]);const l=async()=>{const b=H();if(console.log("🔔 NotificationGate onEnable called, user ID:",b),!b){console.log("❌ No user ID found"),alert("Avval hisobga kiring");return}try{console.log("🔔 Starting push subscription process..."),await K(b),console.log("✅ Push subscription successful")}catch(p){console.error("❌ Push subscription failed:",p),alert("Bildirishnomalarni yoqishda xatolik yuz berdi")}finally{W(),r(!1)}},g=()=>{W(),r(!1)};return o?e.jsx("div",{className:"fixed inset-0 z-[9999] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-sm rounded-2xl bg-white text-gray-900 shadow-xl p-5",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Bildirishnomalarni yoqamizmi?"}),e.jsx("p",{className:"mt-2 text-sm",children:"Buyurtma holati o'zgarsa darhol xabar yuboramiz."}),s&&e.jsxs("div",{className:"mt-3 text-xs rounded-lg bg-blue-50 p-3",children:["iOS'da push faqat ",e.jsx("b",{children:"Add to Home Screen"}),` orqali o'rnatilgan PWA'da ishlaydi. Avval Eurodoor'ni Home Screen'ga qo'shing, so'ng "Yoqish" ni bosing.`]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:l,className:"flex-1 rounded-xl bg-blue-600 text-white py-2 font-medium hover:opacity-90",children:"Yoqish"}),e.jsx("button",{onClick:g,className:"flex-1 rounded-xl border border-gray-300 py-2 font-medium",children:"Keyin"})]})]})}):null}const F=n.lazy(()=>q(()=>import("./HomePage-Bm2UdpK2.js"),__vite__mapDeps([0,1,2,3]))),et=n.lazy(()=>q(()=>import("./CatalogPage-ZH96mQrR.js"),__vite__mapDeps([4,2,5,1,3]))),tt=n.lazy(()=>q(()=>import("./AboutPage-C8JW2Irb.js"),__vite__mapDeps([6,1,2,3]))),rt=n.lazy(()=>q(()=>import("./ContactPage-BAK27SME.js"),__vite__mapDeps([7,2,1,3]))),ot=n.lazy(()=>q(()=>import("./ProductDetailPage-CS5TbSwl.js"),__vite__mapDeps([8,2,5,1,3]))),st=n.lazy(()=>q(()=>import("./OrderSuccessPage-BqpWC9_6.js"),__vite__mapDeps([9,2,1,3]))),at=n.lazy(()=>q(()=>import("./OrderTracking-BF8c4EKI.js"),__vite__mapDeps([10,2,1,3]))),it=n.lazy(()=>q(()=>import("./ProfilePage-DoPzmxNr.js"),__vite__mapDeps([11,2,1,3])));function nt(){const o=()=>{const a=window.location.hash.replace("#",""),m=["home","catalog","about","contact","orders","profile","order-success","product-detail"];if(console.log("🔍 getInitialPage - hash:",a),console.log("🔍 getInitialPage - validPages:",m),a.startsWith("product-detail/"))return console.log("✅ getInitialPage - returning product-detail"),"product-detail";const N=m.includes(a);console.log("🔍 getInitialPage - isValidPage:",N);const v=N?a:"home";return console.log("🔍 getInitialPage - returning:",v),v},r=()=>{const a=window.location.hash.replace("#","");if(console.log("🔍 getProductIdFromHash - hash:",a),a.startsWith("product-detail/")){const m=a.split("/")[1];return console.log("🔍 getProductIdFromHash - extracted productId:",m),m}return console.log("🔍 getProductIdFromHash - no product ID found"),null},[s,c]=n.useState(o()),[t,l]=n.useState(null),[g,b]=n.useState(!0),[p,x]=n.useState(!1),[k,u]=n.useState("login"),[i,f]=n.useState(!1);n.useEffect(()=>{const a=window.Telegram?.WebApp||window.location.href.includes("t.me")||window.location.href.includes("telegram.me")||navigator.userAgent.includes("TelegramBot");f(!!a);const m=P=>{P.data?.type==="NAVIGATE_TO_ORDERS"&&(console.log("🔔 Notification clicked, navigating to orders"),d("orders"))};navigator.serviceWorker?.addEventListener("message",m);const N=setTimeout(()=>{b(!1)},2e3);document.body.style.overflow="auto",document.body.classList.remove("overflow-hidden");const v=()=>{const P=o(),_=r();console.log("🔄 Hash changed to:",P),console.log("🔄 Product ID from hash:",_),c(P),P==="product-detail"&&_?(l({id:_}),console.log("✅ Set selectedProduct to:",{id:_})):l(null)};return window.addEventListener("hashchange",v),pe(),()=>{clearTimeout(N),window.removeEventListener("hashchange",v),navigator.serviceWorker?.removeEventListener("message",m),document.body.style.overflow="auto",document.body.classList.remove("overflow-hidden")}},[]),n.useEffect(()=>{const a=window.location.hash.replace("#","");if(console.log("🔍 Initial hash check:",a),a.startsWith("product-detail/")){const m=a.split("/")[1];console.log("🔍 Initial product ID:",m),l({id:m}),console.log("✅ Initial selectedProduct set to:",{id:m})}else l(null)},[]),n.useEffect(()=>{document.body.style.overflow="auto",document.body.classList.remove("overflow-hidden"),window.scrollTo({top:0,behavior:"smooth"})},[s]);const d=(a,m)=>{console.log("🔄 App: Navigating to page:",a,"productId:",m),console.log("🔄 App: Current state before navigation - currentPage:",s,"selectedProduct:",t),a==="product-detail"&&m?(console.log("🔄 App: Setting selectedProduct to:",{id:m}),l({id:m}),console.log("🔄 App: Setting currentPage to: product-detail"),c("product-detail"),window.location.hash=`product-detail/${m}`,console.log("✅ App: Product selected:",m),console.log("✅ App: Hash set to:",window.location.hash)):(c(a),l(null),window.location.hash=a,console.log("✅ App: Page set to:",a),a==="catalog"&&(console.log("🔄 Forcing catalog reload..."),setTimeout(()=>{c("catalog")},50))),console.log("🔍 Current page state:",a)},h=()=>{console.log("🎯 Rendering page:",s),console.log("🎯 Current hash:",window.location.hash),console.log("🎯 Selected product:",t);const a=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(oe,{isLoading:!0})});switch(s){case"home":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(F,{onNavigate:d})});case"catalog":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(et,{onNavigate:d})});case"about":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(tt,{onNavigate:d})});case"contact":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(rt,{onNavigate:d})});case"product-detail":{const m=t?.id||r();return console.log("🎯 ProductDetail case - productId:",m,"selectedProduct:",t),console.log("🎯 Current hash:",window.location.hash),console.log("🎯 getProductIdFromHash result:",r()),console.log("🎯 selectedProduct?.id:",t?.id),console.log("🎯 getProductIdFromHash():",r()),m?(console.log("✅ Rendering ProductDetailPage with productId:",m),e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(ot,{productId:m,onNavigate:d})})):(console.log("❌ No productId found, showing error page"),console.log("❌ selectedProduct:",t),console.log("❌ getProductIdFromHash():",r()),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Mahsulot topilmadi"}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Product ID: ",m||"undefined"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Current hash: ",window.location.hash]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["Selected product: ",t?JSON.stringify(t):"null"]}),e.jsxs("p",{className:"text-gray-300 mb-4",children:["getProductIdFromHash(): ",r()||"null"]}),e.jsx("button",{onClick:()=>d("catalog"),className:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600",children:"Katalogga qaytish"})]})}))}case"order-success":return console.log("🎉 Rendering OrderSuccessPage!"),e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(st,{onNavigate:d})});case"orders":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(at,{})});case"profile":return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(it,{onNavigate:d})});case"admin":return window.open("http://localhost:5175","_blank"),e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(F,{onNavigate:d})});default:return e.jsx(n.Suspense,{fallback:e.jsx(a,{}),children:e.jsx(F,{onNavigate:d})})}};return g?e.jsx(oe,{isLoading:!0}):e.jsx($e,{children:e.jsx(De,{children:e.jsx(He,{children:e.jsx(Ae,{children:e.jsx(Ve,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-hidden",children:[e.jsx(Xe,{currentPage:s,onNavigate:d,onShowAuthModal:a=>{u(a),x(!0)}}),e.jsx(O,{mode:"wait",children:e.jsx(C.main,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`relative ${i?"pt-24":""}`,style:i?{paddingTop:"calc(env(safe-area-inset-top, 0px) + 80px)"}:{},children:h()},s)}),e.jsx(Ze,{isOpen:p,onClose:()=>x(!1),mode:k,onModeChange:u}),e.jsx(Qe,{})]})})})})})})}function lt(o,r=6e3){return Promise.race([Promise.resolve(o),new Promise((s,c)=>setTimeout(()=>c(new Error("timeout")),r))])}let ae=!1;function ct(){j.auth.onAuthStateChange(async(o,r)=>{if(console.log("[EURODOOR] auth =",o),!(o!=="SIGNED_IN"||!r?.user))try{const s=await lt(j.from("customers").select("id").eq("user_id",r.user.id).maybeSingle(),6e3);console.log("[EURODOOR] customer row:",s.data)}catch(s){console.warn("[EURODOOR] customer check skip:",s)}finally{ae||(ae=!0,location.hash="orders")}})}ct();le(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsx(nt,{})}));export{ce as I,he as a,fe as b,G as c,e as j,j as s,B as u};
