const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lib-Cky00deG.js","assets/supabase-B92pX7lK.js","assets/react-vendor-CUqQehio.js","assets/vendor-DWqYTkxU.js"])))=>i.map(i=>d[i]);
import{r as e,j as t,X as a,b as s,M as r,c as i,T as l,C as n,a as o,U as c,P as d,B as m,L as h,d as u,e as x,f as b,g as p,E as g,h as f,A as w,i as j,k as y,l as N,m as v,I as k,n as _,o as S,H as C,S as z,p as E,q,s as I,t as P,u as O,v as D}from"./react-vendor-CUqQehio.js";import{m as A,A as T,u as B}from"./animations-DJ22dvbJ.js";import{u as M,a as L,b as U}from"./catalog-DwAT83sS.js";import{s as $,a as F,e as W,c as Z,b as R,g as H,m as K,i as J,d as X,o as Y,t as G,f as Q}from"./lib-Cky00deG.js";const V={},ee=function(e,t,a){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=e?.nonce||e?.getAttribute("nonce");s=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in V)return;V[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,a&&r.setAttribute("nonce",a),document.head.appendChild(r),t?new Promise((t,a)=>{r.addEventListener("load",t),r.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},te=e.memo(a=>{const[s,r]=e.useState(!1),[i,l]=e.useState(!1),n=e.useCallback(()=>{r(!0)},[]),o=e.useCallback(()=>{l(!0)},[]),{src:c,alt:d,style:m,className:h,width:u,height:x,priority:b=!1,quality:p=80,...g}=a,f=c;return s?t.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${h??""}`,style:m,children:t.jsx("div",{className:"flex items-center justify-center w-full h-full",children:t.jsx("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==",alt:"Error loading image",width:u,height:x,loading:"lazy",decoding:"async",...g,"data-original-url":c})})}):t.jsx("img",{src:f,alt:d,className:`${h} ${i?"opacity-100":"opacity-0"} transition-opacity duration-300`,style:m,width:u,height:x,loading:b?"eager":"lazy",decoding:"async",onError:n,onLoad:o,...g})});te.displayName="ImageWithFallback";const ae=e.memo(({onNavigate:a})=>{const[s,r]=e.useState(!1),[i,l]=e.useState(!1),n=e.useCallback(()=>{r(e=>!e)},[]);e.useEffect(()=>{const e=window.Telegram?.WebApp||window.location.href.includes("t.me")||window.location.href.includes("telegram.me")||navigator.userAgent.includes("TelegramBot");l(!!e)},[]),e.useEffect(()=>{const e=e=>{e.ctrlKey&&e.shiftKey&&"A"===e.key&&r(e=>!e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s]);return t.jsx(A.header,{variants:{hidden:{opacity:0,y:-12},show:{opacity:1,y:0,transition:{type:"spring",stiffness:500,damping:32}}},initial:"hidden",animate:"show",className:"bg-transparent z-40 overflow-visible "+(i?"fixed top-0 left-0 right-0 m-4":"sticky top-0 m-4"),style:i?{top:"env(safe-area-inset-top, 0px)",marginTop:"env(safe-area-inset-top, 16px)",marginLeft:"env(safe-area-inset-left, 16px)",marginRight:"env(safe-area-inset-right, 16px)"}:{},children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"flex items-center justify-between h-16",children:[t.jsx("div",{onClick:e=>{e.ctrlKey||e.shiftKey?n():(a("home"),window.scrollTo({top:0,left:0,behavior:"auto"}))},className:"cursor-pointer",children:t.jsx(te,{src:"https://iili.io/K2WCLJV.png",alt:"EURODOOR Logo",className:"h-8 w-auto"})}),t.jsx("div",{className:"w-24"})]})})})});function se({onNavigate:n}){const{items:o,totalItems:c,totalPrice:d,updateQuantity:m,removeFromCart:h,clearCart:u,isCartOpen:x,setIsCartOpen:b}=M(),{t:p}=L();e.useEffect(()=>{const e=document.querySelector("header");e&&(x?e.classList.remove("backdrop-blur-sm"):e.classList.add("backdrop-blur-sm"))},[x]);const g=e=>new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(e);return t.jsx(T,{children:x&&t.jsxs(t.Fragment,{children:[t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>b(!1),className:"fixed inset-0 bg-black/30 cart-backdrop-blur z-[9998]",style:{backdropFilter:"blur(8px) !important",WebkitBackdropFilter:"blur(8px) !important"}}),t.jsxs(A.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3},className:"fixed right-0 top-0 h-screen w-full md:w-2/5 bg-black/30 cart-modal-blur shadow-2xl z-[9999] flex flex-col border-l border-white/30",style:{backdropFilter:"blur(24px) saturate(150%) !important",WebkitBackdropFilter:"blur(24px) saturate(150%) !important"},children:[t.jsxs("div",{className:"flex items-center justify-between p-8 border-b border-white/20",children:[t.jsxs("h2",{className:"text-xl font-semibold text-white",children:[p("cart.title")," (",c,")"]}),t.jsx("button",{onClick:()=>b(!1),className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:t.jsx(a,{className:"h-5 w-5 text-white/80"})})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:0===o.length?t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[t.jsx(s,{className:"h-16 w-16 text-white/50 mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:p("cart.empty")}),t.jsx("p",{className:"text-white/70 mb-6",children:p("cart.empty_desc")}),t.jsx("button",{onClick:()=>{b(!1),n("catalog")},className:"px-6 py-3 bg-gradient-to-r from-blue-500/30 to-purple-500/30 text-white rounded-xl hover:from-blue-500/40 hover:to-purple-500/40 transition-all duration-300 border border-blue-500/50 shadow-lg hover:shadow-xl transform hover:scale-105",children:p("cart.go_to_catalog")})]}):t.jsx("div",{className:"space-y-4",children:o.map(e=>t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-center space-x-4 p-4 bg-gradient-to-br from-black/40 to-black/20 cart-item-blur rounded-xl border border-white/30 hover:border-blue-500/50 transition-all duration-300",children:[t.jsx(te,{src:e.image,alt:e.name,className:"w-20 h-20 object-cover rounded-lg"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-sm font-medium text-white truncate",children:e.name}),e.dimensions&&t.jsxs("p",{className:"text-xs text-white/70",children:[p("cart.dimensions"),": ",e.dimensions]}),e.color&&t.jsxs("p",{className:"text-xs text-white/70",children:[p("cart.color"),": ",e.color]}),t.jsx("p",{className:"text-sm font-semibold text-blue-300",children:g(e.price)})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>m(e.id,e.quantity-1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:t.jsx(r,{className:"h-4 w-4 text-white"})}),t.jsx("span",{className:"w-8 text-center text-sm font-medium text-white",children:e.quantity}),t.jsx("button",{onClick:()=>m(e.id,e.quantity+1),className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:t.jsx(i,{className:"h-4 w-4 text-white"})}),t.jsx("button",{onClick:()=>h(e.id),className:"p-1 hover:bg-red-500/20 rounded-full transition-colors ml-2",children:t.jsx(l,{className:"h-4 w-4 text-red-400"})})]})]},`${e.id}-${e.dimensions}-${e.color}`))})}),o.length>0&&t.jsxs("div",{className:"border-t border-white/20 p-8 space-y-4",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-semibold text-white",children:[p("cart.total"),":"]}),t.jsx("span",{className:"text-xl font-bold text-blue-300",children:g(d)})]}),t.jsxs("div",{className:"flex space-x-3",children:[t.jsx("button",{onClick:u,className:"flex-1 px-4 py-2 border border-white/30 text-white rounded-xl hover:bg-white/20 transition-all duration-300",children:p("cart.clear")}),t.jsx("button",{onClick:()=>{b(!1),n("contact")},className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500/30 to-purple-500/30 text-white rounded-xl hover:from-blue-500/40 hover:to-purple-500/40 transition-all duration-300 border border-blue-500/50 shadow-lg hover:shadow-xl transform hover:scale-105",children:p("cart.checkout")})]})]})]})]})})}ae.displayName="Header";const re=e.createContext(void 0),ie=()=>{const t=e.useContext(re);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},le=({children:a})=>{const[s,r]=e.useState(null),[i,l]=e.useState(!0),n=async e=>{try{return!!(await Z.getCustomerData(e)).data||(await $.auth.signOut(),r(null),!1)}catch(t){return!1}};e.useEffect(()=>{(async()=>{try{const{data:{session:e}}=await $.auth.getSession();if(e?.user){if(await n(e.user.id)){const t=(await Z.getCustomerData(e.user.id)).data,a={id:e.user.id,email:e.user.email||"",name:t?.name||e.user.user_metadata?.name||"",phone:t?.phone||e.user.user_metadata?.phone||"",created_at:e.user.created_at};r(a),F(e.user.id)}}}catch(e){}finally{l(!1)}})();const{data:{subscription:e}}=$.auth.onAuthStateChange(async(e,t)=>{if("SIGNED_OUT"===e)return r(null),F(""),void l(!1);if(t?.user)if("SIGNED_IN"===e){if(await n(t.user.id)){const e={id:t.user.id,email:t.user.email||"",name:t.user.user_metadata?.name,phone:t.user.user_metadata?.phone,created_at:t.user.created_at};r(e),F(t.user.id);try{await W(t.user.id)}catch(a){}setTimeout(()=>{},1e3)}}else{const e={id:t.user.id,email:t.user.email||"",name:t.user.user_metadata?.name,phone:t.user.user_metadata?.phone,created_at:t.user.created_at};r(e),F(t.user.id)}else r(null);l(!1)}),t=$.channel("customer-deletion").on("postgres_changes",{event:"DELETE",schema:"public",table:"customers"},async e=>{s&&s.id===e.old.id&&(await $.auth.signOut(),r(null))}).subscribe();return()=>{e.unsubscribe(),t.unsubscribe()}},[]);const o={user:s,loading:i,signUp:async(e,t,a,s)=>{try{l(!0);const n=`${s?.replace(/\D/g,"")||""}@eurodoor.uz`,{data:o,error:c}=await $.auth.signUp({email:n,password:t,options:{data:{name:a,phone:s,original_email:e},emailRedirectTo:void 0}});if(c){if(c.message.includes("already registered")||c.message.includes("User already registered")){const{data:r,error:i}=await $.auth.signInWithPassword({email:n,password:t});if(r?.user){const t={id:r.user.id,name:a||r.user.user_metadata?.name||"",phone:s||r.user.user_metadata?.phone||"",email:e||r.user.email||""};return(await Z.createCustomer(t)).success,l(!1),{success:!0}}return l(!1),{success:!1,error:"Foydalanuvchi mavjud, lekin parol noto'g'ri"}}return l(!1),{success:!1,error:c.message}}if(o.user){try{const t={id:o.user.id,name:a||"",phone:s||"",email:e||o.user.email||""};(await Z.createCustomer(t)).success}catch(i){}const{data:l,error:n}=await $.auth.signInWithPassword({email:e,password:t});if(n);else{const{data:{user:e}}=await $.auth.getUser();if(e){const t=(await Z.getCustomerData(e.id)).data,a={id:e.id,email:e.email||"",name:t?.name||e.user_metadata?.name||"",phone:t?.phone||e.user_metadata?.phone||"",created_at:e.created_at};r(a),F(e.id)}setTimeout(()=>{},1e3)}}return{success:!0}}catch(n){return{success:!1,error:n.message||"Ro'yxatdan o'tishda xatolik yuz berdi"}}finally{l(!1)}},signIn:async(e,t)=>{try{l(!0);let s=e;if(!e.includes("@eurodoor.uz")){s=`${e.replace(/\D/g,"")}@eurodoor.uz`}const{error:i}=await $.auth.signInWithPassword({email:s,password:t});if(i){if(i.message.includes("Email not confirmed")||i.message.includes("email_not_confirmed"))try{const{error:e}=await $.auth.updateUser({data:{email_confirmed:!0}});if(!e){const{error:e}=await $.auth.signInWithPassword({email:s,password:t});if(!e){const{data:{user:e}}=await $.auth.getUser();if(e){const t=(await Z.getCustomerData(e.id)).data,a={id:e.id,email:e.email||"",name:t?.name||e.user_metadata?.name||"",phone:t?.phone||e.user_metadata?.phone||"",created_at:e.created_at};r(a),F(e.id)}return{success:!0}}}}catch(a){}return{success:!1,error:i.message}}const{data:{user:n}}=await $.auth.getUser();if(n){const e=(await Z.getCustomerData(n.id)).data,t={id:n.id,email:n.email||"",name:e?.name||n.user_metadata?.name||"",phone:e?.phone||n.user_metadata?.phone||"",created_at:n.created_at};r(t),F(n.id)}return{success:!0}}catch(s){return{success:!1,error:"Kirishda xatolik yuz berdi"}}finally{l(!1)}},signOut:async()=>{try{l(!0),await $.auth.signOut(),r(null),F("")}catch(e){}finally{l(!1)}},updateProfile:async e=>{try{if(!s)return{success:!1,error:"Foydalanuvchi topilmadi"};try{const t={...e,updated_at:(new Date).toISOString()},{data:a,error:r}=await $.from("customer_registrations").update(t).eq("id",s.id).select().single();if(r)throw r}catch(t){try{const t=await Z.updateCustomer(s.id,e);if(!t.success)throw new Error(t.error)}catch(a){throw a}}try{const{error:t}=await $.auth.updateUser({data:e})}catch(i){}return r(t=>t?{...t,...e}:null),{success:!0}}catch(l){return{success:!1,error:l.message||"Profil yangilashda xatolik"}}}};return t.jsx(re.Provider,{value:o,children:a})},ne=({id:s,type:r,title:i,message:l,duration:c=3e3,onClose:d})=>{e.useEffect(()=>{const e=setTimeout(()=>{d(s)},c);return()=>clearTimeout(e)},[s,c,d]);return t.jsx(A.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},className:`${(()=>{switch(r){case"success":default:return"bg-green-500/20 border-green-500/30";case"error":return"bg-red-500/20 border-red-500/30";case"info":return"bg-blue-500/20 border-blue-500/30"}})()} backdrop-blur-lg border rounded-xl p-4 shadow-xl max-w-sm w-full`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0",children:(()=>{switch(r){case"success":default:return t.jsx(n,{className:"h-5 w-5 text-green-400"});case"error":return t.jsx(a,{className:"h-5 w-5 text-red-400"});case"info":return t.jsx(o,{className:"h-5 w-5 text-blue-400"})}})()}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"text-white font-semibold text-sm",children:i}),l&&t.jsx("p",{className:"text-gray-300 text-xs mt-1",children:l})]}),t.jsx("button",{onClick:()=>d(s),className:"flex-shrink-0 text-gray-400 hover:text-white transition-colors",children:t.jsx(a,{className:"h-4 w-4"})})]})})},oe=({toasts:e,onClose:a})=>t.jsx("div",{className:"fixed top-4 right-4 z-[10000] space-y-2",children:t.jsx(T,{children:e.map(e=>t.jsx(A.div,{layout:!0,initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.9},transition:{duration:.3,ease:"easeOut"},children:t.jsx(ne,{...e,onClose:a})},e.id))})});function ce({open:s,onClose:r,currentPage:i,onNavigate:l,onShowAuthModal:n}){const u=e.useRef(null),{t:x,language:b,changeLanguage:p}=L(),{totalItems:g,setIsCartOpen:f}=M(),{user:w,signOut:j}=ie(),{showSuccess:y}=U();e.useEffect(()=>{const e=document.body.style.overflow;return document.body.style.overflow=s?"hidden":e,()=>{document.body.style.overflow=e}},[s]),e.useEffect(()=>{const e=e=>{"Escape"===e.key&&r()};return s&&(window.addEventListener("keydown",e),setTimeout(()=>{u.current?.focus()},100)),()=>window.removeEventListener("keydown",e)},[s,r]);const N=e=>{l(e),r()},v=e=>{n(e),r()},k=[{name:x("nav.catalog"),id:"catalog"},{name:x("nav.about"),id:"about"},{name:x("nav.contact"),id:"contact"}];return t.jsx(T,{children:s&&t.jsxs(t.Fragment,{children:[t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},"aria-hidden":!s,onClick:r,className:"fixed inset-0 bg-black/30 cart-backdrop-blur z-[9998]"}),t.jsxs(A.aside,{ref:u,role:"dialog","aria-modal":"true","aria-label":"Main menu",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"tween",duration:.3,ease:"easeInOut"},className:"fixed right-0 top-0 h-screen w-full md:w-2/5 bg-black/30 cart-modal-blur shadow-2xl z-[9999] flex flex-col border-l border-white/30",style:{backdropFilter:"blur(24px) saturate(150%) !important",WebkitBackdropFilter:"blur(24px) saturate(150%) !important"},tabIndex:-1,children:[t.jsxs("div",{className:"h-16 flex items-center justify-between px-6 border-b border-white/20",children:[t.jsx("span",{className:"text-lg font-semibold text-white",children:x("header.menu")}),t.jsx("button",{onClick:r,"aria-label":"Yopish",className:"h-9 w-9 rounded-xl hover:bg-white/10 flex items-center justify-center text-white transition-colors",children:t.jsx(a,{className:"h-5 w-5"})})]}),t.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto custom-scrollbar",children:[t.jsx("nav",{className:"px-6 py-6 flex flex-col gap-3",children:k.map(e=>{const a=i===e.id;return t.jsx("button",{onClick:()=>N(e.id),className:"block w-full text-left rounded-lg px-4 py-3 transition-colors truncate "+(a?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"text-white hover:bg-white/10"),children:e.name},e.id)})}),w?t.jsxs("div",{className:"px-6 py-4 border-t border-white/20",children:[t.jsxs("div",{className:"px-4 py-3 bg-white/10 rounded-lg mb-4",children:[t.jsx("p",{className:"text-white font-medium text-sm truncate",children:w.name||w.email}),t.jsx("p",{className:"text-gray-300 text-xs",children:x("header.welcome")})]}),t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsxs("button",{onClick:()=>N("profile"),className:"flex items-center w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-sm",children:[t.jsx(c,{className:"h-4 w-4 mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x("header.profile")})]}),t.jsxs("button",{onClick:()=>N("orders"),className:"flex items-center w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-sm",children:[t.jsx(d,{className:"h-4 w-4 mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x("header.orders")})]}),t.jsxs("button",{onClick:()=>{f(!0),r()},className:"flex items-center w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-sm",children:[t.jsx(o,{className:"h-4 w-4 mr-3 flex-shrink-0"}),t.jsxs("span",{className:"truncate",children:[x("header.cart")," (",g,")"]})]}),t.jsxs("button",{onClick:()=>{r()},className:"flex items-center w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-sm",children:[t.jsx(m,{className:"h-4 w-4 mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x("header.notifications")})]}),t.jsx("hr",{className:"border-white/20 my-2"}),t.jsxs("button",{onClick:async()=>{try{await j(),y(x("auth.logout_success")),r()}catch(e){}},className:"flex items-center w-full px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-lg transition-colors text-sm",children:[t.jsx(h,{className:"h-4 w-4 mr-3 flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x("header.logout")})]})]})]}):t.jsx("div",{className:"px-6 py-4 border-t border-white/20",children:t.jsxs("div",{className:"flex flex-col gap-3",children:[t.jsx("button",{onClick:()=>v("login"),className:"w-full px-4 py-3 text-white hover:bg-white/10 rounded-lg transition-colors text-sm",children:x("header.login")}),t.jsx("button",{onClick:()=>v("register"),className:"w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:x("header.register")})]})}),t.jsx("div",{className:"mt-auto px-6 py-6 border-t border-white/20",children:t.jsx("div",{className:"space-y-2",children:[{code:"uz",name:"O'zbek",flag:"🇺🇿"},{code:"ru",name:"Русский",flag:"🇷🇺"},{code:"en",name:"English",flag:"🇺🇸"}].map(e=>t.jsx("button",{onClick:()=>{p(e.code),r()},className:"w-full text-left px-4 py-3 rounded-lg transition-colors "+(b===e.code?"bg-blue-500/20 text-blue-300 border border-blue-500/30":"text-white hover:bg-white/10"),children:t.jsxs("span",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-lg",children:e.flag}),t.jsx("span",{className:"font-medium",children:e.name})]})},e.code))})})]})]})]})})}const de=e.memo(({currentPage:a,onNavigate:s,onShowAuthModal:r})=>{const[i,l]=e.useState(!1),[n,c]=e.useState(!1),{totalItems:d,setIsCartOpen:m}=M(),h=e.useCallback(e=>{s(e),l(!1)},[s]),x=e.useCallback(e=>{r(e),l(!1)},[r]);e.useEffect(()=>{const e=window.Telegram?.WebApp||window.location.href.includes("t.me")||window.location.href.includes("telegram.me")||navigator.userAgent.includes("TelegramBot");c(!!e)},[]),e.useEffect(()=>(i?(document.body.classList.add("overflow-hidden"),document.body.style.overflow="hidden"):(document.body.classList.remove("overflow-hidden"),document.body.style.overflow="auto"),()=>{document.body.classList.remove("overflow-hidden"),document.body.style.overflow="auto"}),[i]);return t.jsxs(t.Fragment,{children:[t.jsx(A.div,{variants:{hidden:{opacity:0,scale:.8},show:{opacity:1,scale:1,transition:{type:"spring",stiffness:500,damping:32}}},initial:"hidden",animate:"show",className:"fixed z-50 top-4 right-4",style:n?{top:"calc(env(safe-area-inset-top, 0px) + 16px)",right:"calc(env(safe-area-inset-right, 0px) + 16px)"}:{},children:t.jsxs("div",{className:"flex gap-3",children:[t.jsxs("button",{onClick:()=>m(!0),className:"relative inline-flex h-12 w-12 items-center justify-center rounded-full text-white transition-all duration-300 hover:bg-white/10","aria-label":"Shopping cart",children:[t.jsx(o,{className:"h-6 w-6"}),d>0&&t.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-6 w-6 flex items-center justify-center font-semibold",children:d})]}),t.jsx("button",{"aria-controls":"burger-menu","aria-expanded":i,onClick:()=>l(!0),className:"inline-flex h-12 w-12 items-center justify-center rounded-full text-white transition-all duration-300 hover:bg-white/10","aria-label":"Menu",children:t.jsx(u,{className:"h-6 w-6"})})]})}),t.jsx(ce,{open:i,onClose:()=>l(!1),currentPage:a,onNavigate:h,onShowAuthModal:x}),t.jsx(se,{onNavigate:s})]})});function me({isLoading:a}){const[s,r]=e.useState(1);return e.useEffect(()=>{a||r(0)},[a]),a||0!==s?t.jsx(T,{children:a&&t.jsx(A.div,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.5},className:"fixed inset-0 z-50 flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:t.jsxs("div",{className:"text-center",children:[t.jsx(A.h1,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.5},className:"text-2xl font-bold mb-8 bg-gradient-to-r from-white via-blue-100 to-purple-100 bg-clip-text text-transparent",children:"Eurodoor"}),t.jsxs(A.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.3},className:"relative",children:[t.jsx("div",{className:"w-16 h-16 mx-auto border-4 border-white/20 border-t-blue-400 rounded-full animate-spin"}),t.jsx("div",{className:"absolute inset-0 w-16 h-16 mx-auto border-4 border-transparent border-r-purple-400 rounded-full animate-spin",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),t.jsx(A.p,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.6,duration:.5},className:"text-white/70 mt-4 text-sm",children:"Yuklanmoqda..."})]})})}):null}async function he(){const e=H();if(e)try{await W(e)}catch(t){}finally{K()}}function ue(){if(!R())return;const e=()=>{window.removeEventListener("pointerdown",e),window.removeEventListener("touchend",e),he()};window.addEventListener("pointerdown",e,{once:!0}),window.addEventListener("touchend",e,{once:!0}),setTimeout(()=>{R()&&he()},1500)}function xe({isOpen:s,onClose:r,mode:i,onModeChange:l}){const[n,o]=e.useState({phone:"",password:"",name:"",confirmPassword:""}),[d,m]=e.useState(!1),[h,u]=e.useState(!1),[f,w]=e.useState(""),[j,y]=e.useState(!1),{signIn:N,signUp:v}=ie(),{t:k}=L(),{showSuccess:_,showError:S}=U(),C=e=>{const{name:t,value:a}=e.target;let s=a;if("phone"===t){const e=a.replace(/[^\d+]/g,"");e.startsWith("998")?s="+"+e:e.startsWith("+998")?s=e:e.length>0&&!e.startsWith("+")&&(s="+998"+e)}o(e=>({...e,[t]:s})),w("")};return s?t.jsx(T,{children:t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-[10001] flex items-center justify-center p-4",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},onClick:r,children:t.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white/10 backdrop-blur-xl border border-white/20 rounded-lg shadow-xl w-full max-w-md",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[t.jsx("h2",{className:"text-xl font-semibold text-white",children:k("login"===i?"auth.login":"auth.register")}),t.jsx("button",{onClick:r,className:"p-2 hover:bg-white/20 rounded-full transition-colors text-white",children:t.jsx(a,{className:"h-5 w-5 text-white"})})]}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),w(""),y(!0);try{if("login"===i){const e=`${n.phone.replace(/\D/g,"")}@eurodoor.uz`,t=await N(e,n.password);t.success||t.error?.includes("Email not confirmed")||t.error?.includes("email_not_confirmed")?(_("Tizimga kirildi!","Muvaffaqiyatli tizimga kirdingiz"),r(),o({phone:"",password:"",name:"",confirmPassword:""}),w("")):S("Xatolik",t.error||k("auth.login_error")),ue()}else{if(!n.name.trim())return void w(k("auth.name_required"));if(!n.phone.trim())return void w(k("auth.phone_required"));if(n.password.length<4)return void w("Parol kamida 4 ta belgi bo'lishi kerak");if(n.password!==n.confirmPassword)return void w(k("auth.passwords_not_match"));const e=`${n.phone.replace(/\D/g,"")}@eurodoor.uz`,t=await v(e,n.password,n.name,n.phone);t.success?(_("Ro'yxatdan o'tdingiz!","Muvaffaqiyatli ro'yxatdan o'tdingiz"),r(),o({phone:"",password:"",name:"",confirmPassword:""})):w(t.error||k("auth.register_error"))}}catch(t){S("Xatolik",t.message??k("auth.general_error"))}finally{y(!1)}},className:"p-6 space-y-4",children:[f&&t.jsx("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-md text-sm backdrop-blur-sm",children:f}),"register"===i&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[k("auth.name")," *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),t.jsx("input",{type:"text",name:"name",value:n.name,onChange:C,placeholder:k("auth.name_placeholder"),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[k("auth.phone")," *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),t.jsx("input",{type:"tel",name:"phone",value:n.phone,onChange:C,placeholder:k("auth.phone_placeholder"),className:"w-full pl-10 pr-4 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0})]})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[k("auth.password")," *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),t.jsx("input",{type:d?"text":"password",name:"password",value:n.password,onChange:C,placeholder:k("auth.password_placeholder"),className:"w-full pl-10 pr-12 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0}),t.jsx("button",{type:"button",onClick:()=>m(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:d?t.jsx(p,{className:"h-5 w-5"}):t.jsx(g,{className:"h-5 w-5"})})]})]}),"register"===i&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-white mb-1",children:[k("auth.confirm_password")," *"]}),t.jsxs("div",{className:"relative",children:[t.jsx(b,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-white/70"}),t.jsx("input",{type:h?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:C,placeholder:k("auth.confirm_password_placeholder"),className:"w-full pl-10 pr-12 py-2 bg-white/10 border border-white/30 rounded-md focus:ring-2 focus:ring-white/50 focus:border-transparent text-white placeholder-white/50 backdrop-blur-sm",required:!0}),t.jsx("button",{type:"button",onClick:()=>u(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/70 hover:text-white",children:h?t.jsx(p,{className:"h-5 w-5"}):t.jsx(g,{className:"h-5 w-5"})})]})]}),t.jsx("button",{type:"submit",disabled:j,className:"w-full bg-white/20 backdrop-blur-sm text-white py-2 px-4 rounded-md hover:bg-white/30 focus:ring-2 focus:ring-white/50 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors border border-white/30",children:k(j?"auth.loading":"login"===i?"auth.login":"auth.register")})]}),t.jsx("div",{className:"px-6 pb-6",children:t.jsx("div",{className:"text-center text-sm text-white/80",children:"login"===i?t.jsxs(t.Fragment,{children:[k("auth.no_account")," ",t.jsx("button",{onClick:()=>l("register"),className:"text-white hover:text-white/80 font-medium",children:k("auth.register_link")})]}):t.jsxs(t.Fragment,{children:[k("auth.have_account")," ",t.jsx("button",{onClick:()=>l("login"),className:"text-white hover:text-white/80 font-medium",children:k("auth.login_link")})]})})})]})})}):null}de.displayName="FloatingButtons";class be extends e.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:t.jsx("div",{className:"max-w-md w-full mx-4",children:t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Xatolik yuz berdi"}),t.jsx("p",{className:"text-gray-300 mb-6",children:"Kechirasiz, kutilmagan xatolik yuz berdi. Sahifani yangilab ko'ring."}),t.jsxs("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Sahifani yangilash"}),t.jsx("button",{onClick:()=>window.location.href="/",className:"w-full bg-gray-600 hover:bg-gray-700 text-white font-medium py-3 px-6 rounded-lg transition-colors",children:"Bosh sahifaga qaytish"})]}),!1]})})}):this.props.children}}function pe(){const{user:t}=ie();e.useEffect(()=>{t&&R()&&a()},[t]);const a=async()=>{try{if(!J())return void K();if("granted"===await Notification.requestPermission()){const t=H();if(t)try{await W(t)}catch(e){}}K()}catch(e){K()}};return null}const ge=Object.freeze(Object.defineProperty({__proto__:null,default:function({onNavigate:e}){const{t:a}=L(),s=[{number:"10+",label:a("about.experience")},{number:"5000+",label:a("about.customers")},{number:"50+",label:a("about.models")},{number:"100%",label:a("about.quality")}],r=["ISO 9001:2015",a("about.gost_cert"),a("about.ce_mark"),a("about.fire_cert")];return t.jsxs("div",{className:"relative min-h-screen",children:[t.jsx("div",{className:"pointer-events-none fixed inset-0 z-0 bg-cover bg-center blur-[2px]",style:{backgroundImage:"url('https://iili.io/KqAQo3g.jpg')"}}),t.jsxs("div",{className:"relative z-10",children:[t.jsx("section",{className:"bg-white/0 rounded-2xl m-4 p-8 py-16",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-6",children:a("about.title")}),t.jsx("p",{className:"text-lg text-white leading-relaxed",children:a("about.description")})]})})}),t.jsx("section",{className:"py-16 bg-white/0 rounded-2xl m-4 p-8 text-white",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:s.map((e,a)=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-3xl md:text-4xl font-bold text-[#E32C27] mb-2",children:e.number}),t.jsx("div",{className:"text-sm text-gray-200",children:e.label})]},a))})})}),t.jsx("section",{className:"py-16 bg-white/0 m-4 rounded-2xl p-8",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:a("about.mission")}),t.jsxs("div",{className:"space-y-4 text-white",children:[t.jsx("p",{children:a("about.mission_text")}),t.jsx("p",{children:a("about.doors_description")}),t.jsx("p",{children:a("about.customer_needs")})]}),t.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(f,{className:"h-6 w-6 text-[#E32C27] mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-white mb-1",children:a("about.security")}),t.jsx("p",{className:"text-sm text-white",children:a("about.highest_security")})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(w,{className:"h-6 w-6 text-[#E32C27] mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-white mb-1",children:"Sifat"}),t.jsx("p",{className:"text-sm text-white",children:"Premium materiallar va ishlov"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(j,{className:"h-6 w-6 text-[#E32C27] mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-white mb-1",children:"Xizmat"}),t.jsx("p",{className:"text-sm text-white",children:"Professional yondashuv"})]})]}),t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx(y,{className:"h-6 w-6 text-[#E32C27] mt-1"}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-semibold text-white mb-1",children:"Yetkazib berish"}),t.jsx("p",{className:"text-sm text-white",children:"Toshkent bo'ylab bepul yetkazib berish"})]})]})]})]}),t.jsx("div",{className:"space-y-6",children:t.jsx("div",{className:"bg-white/10 rounded-lg h-64 flex items-center justify-center",children:t.jsx(te,{src:"https://images.unsplash.com/photo-1629649933424-42da2426e3ed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb2Rlcm4lMjBkb29yJTIwc3RlZWx8ZW58MXx8fHwxNzU2MTA4MjM0fDA&ixlib=rb-4.1.0&q=80&w=1080",alt:a("about.factory_alt"),className:"w-full h-full object-cover rounded-lg"})})})]})})}),t.jsx("section",{className:"py-16 bg-white/0 m-4 rounded-2xl p-8",children:t.jsxs("div",{className:"container mx-auto px-4",children:[t.jsxs("div",{className:"text-center mb-12",children:[t.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:a("about.certificates_standards")}),t.jsx("p",{className:"text-white max-w-2xl mx-auto",children:a("about.international_standards")})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:r.map((e,a)=>t.jsxs("div",{className:"bg-white/10 rounded-lg p-6 text-center shadow-lg hover:shadow-xl transition-shadow",children:[t.jsx("div",{className:"w-16 h-16 bg-[#D4AF37]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx(w,{className:"h-8 w-8 text-[#E32C27]"})}),t.jsx("h3",{className:"font-semibold text-white",children:e})]},a))})]})}),t.jsx("section",{className:"py-16 bg-white/0qwwqwqqwwq m-4 rounded-2xl p-8 text-white",children:t.jsxs("div",{className:"container mx-auto px-4 text-center",children:[t.jsx("h2",{className:"text-3xl font-bold mb-6",children:a("about.partnership")}),t.jsx("p",{className:"text-lg mb-8 opacity-90 max-w-2xl mx-auto",children:a("about.partnership_desc")}),t.jsx("button",{onClick:()=>e("contact"),className:"bg-[#E32C27] text-white px-8 py-4 font-semibold rounded-lg hover:bg-[#F43737] transition-colors",children:a("about.contact_info")})]})})]})]})}},Symbol.toStringTag,{value:"Module"}));const fe=Object.freeze(Object.defineProperty({__proto__:null,default:function({onNavigate:a}){const s=B(),{t:r}=L(),{items:i,totalPrice:l,clearCart:n}=M(),{user:c}=ie(),{showError:m}=U(),[h,u]=e.useState(null),[b,p]=e.useState(!1);e.useEffect(()=>{const e=localStorage.getItem("selectedProduct");if(e)try{const t=JSON.parse(e);u(t),f(e=>({...e,product:t.model_name||t.name}))}catch(t){}},[]);const[g,f]=e.useState({name:c?.name||"",phone:c?.phone||"",email:c?.email||"",product:"",message:"",delivery_address:""});e.useEffect(()=>{(async()=>{})()},[]);const w=e=>{f({...g,[e.target.name]:e.target.value})},j={hidden:{},show:{transition:s?{}:{when:"beforeChildren"}}},C={hidden:{opacity:0,y:40},show:{opacity:1,y:0,transition:s?{duration:0}:{duration:.9,ease:"easeOut"}}};return t.jsxs("div",{className:"relative min-h-screen",children:[t.jsx("div",{className:"fixed inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/hero-bg.png')",backgroundSize:"cover",backgroundPosition:"center",backgroundAttachment:"fixed"}}),t.jsx("div",{className:"fixed inset-0 bg-black/30"}),t.jsxs(A.main,{variants:j,initial:"hidden",animate:"show",className:"relative",children:[!h&&t.jsx(A.section,{variants:C,className:"bg-white/10 backdrop-blur-xl rounded-2xl mx-4 py-16 shadow-2xl border border-white/20 mb-0",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:r("contact.title")}),t.jsx("p",{className:"text-lg text-white/90 max-w-2xl mx-auto",children:r("contact.description")})]})})}),h&&a&&t.jsx(A.section,{variants:C,className:"py-4",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("button",{onClick:()=>{h&&a?a("product-detail",h.id):a&&a("catalog")},className:"bg-white/20 backdrop-blur-xl text-white px-6 py-3 rounded-xl hover:bg-white/30 transition-all duration-300 flex items-center gap-3 border border-white/30 shadow-lg hover:shadow-xl",children:[t.jsx(N,{className:"h-5 w-5"}),t.jsx("span",{className:"font-medium",children:r("contact.back_to_product")})]})})}),(i.length>0||h)&&t.jsx("section",{className:"py-8",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-6 border border-white/20 shadow-2xl",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[t.jsx(o,{className:"h-5 w-5 text-white"}),t.jsx("h4",{className:"font-semibold text-white",children:i.length>0?`${r("contact.cart_items")} (${i.length})`:r("contact.selected_product")})]}),i.length>0?t.jsxs("div",{className:"space-y-4",children:[i.map((e,a)=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("img",{src:e.image,alt:e.name,className:"w-12 h-12 object-cover rounded-md"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-white font-medium",children:e.name}),t.jsxs("p",{className:"text-gray-300 text-sm",children:[e.dimensions&&`${r("contact.dimensions")}: ${e.dimensions}`,e.color&&` | ${r("contact.color")}: ${e.color}`]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"text-white font-semibold",children:[e.price.toLocaleString()," UZS"]}),t.jsxs("p",{className:"text-gray-300 text-sm",children:[r("contact.quantity"),": ",e.quantity]})]})]},a)),t.jsx("div",{className:"border-t border-white/20 pt-4",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("span",{className:"text-lg font-semibold text-white",children:[r("contact.total"),":"]}),t.jsxs("span",{className:"text-xl font-bold text-blue-400",children:[l.toLocaleString()," UZS"]})]})})]}):h?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(d,{className:"h-5 w-5 text-white"}),t.jsx("h4",{className:"font-semibold text-white",children:h.name})]}),t.jsxs("div",{className:"space-y-2 text-sm",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-300",children:[r("contact.material"),":"]}),t.jsx("span",{className:"text-white",children:h.material})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-300",children:[r("contact.security"),":"]}),t.jsx("span",{className:"text-white",children:h.security_class||h.security})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-300",children:[r("contact.dimensions"),":"]}),t.jsx("span",{className:"text-white",children:h.dimensions})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsxs("span",{className:"text-gray-300",children:[r("contact.price"),":"]}),t.jsx("span",{className:"text-white font-semibold",children:h.price})]})]})]})}):null]})})}),t.jsx(A.div,{variants:C,className:"py-12 mt-0",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[t.jsxs(A.div,{variants:C,className:"w-full bg-white/10 backdrop-blur-xl rounded-2xl p-6 py-16 shadow-2xl border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:r(h?"contact.order_form":"contact.contact_form")}),t.jsxs("form",{onSubmit:async e=>{e.preventDefault(),p(!0);try{await X.upsertCustomer({name:g.name,phone:g.phone,email:g.email});const e=await Y.createOrder({customer_name:g.name,customer_phone:g.phone,customer_email:g.email,delivery_address:g.delivery_address,notes:g.message,total_amount:i.length>0?l:h?.price||0,products:i.length>0?i:h?[{name:h.name,price:h.price,quantity:1,image:h.image,dimensions:h.dimensions,color:h.color,material:h.material}]:[]});if(e){const t={orderNumber:e.order_number,customerName:g.name,customerPhone:g.phone,totalAmount:i.length>0?l:h?.price||0};localStorage.setItem("lastOrderData",JSON.stringify(t)),f({name:c?.name||"",phone:c?.phone||"",email:c?.email||"",product:"",message:"",delivery_address:""}),n(),u(null),localStorage.removeItem("selectedProduct"),a&&a("order-success")}}catch(t){m("Xatolik yuz berdi!","Buyurtma yuborishda xatolik yuz berdi. Qaytadan urinib ko'ring.")}finally{p(!1)}},className:"space-y-4",children:[t.jsx("div",{children:t.jsx("input",{type:"text",placeholder:r("contact.name_placeholder"),value:g.name,onChange:e=>w(e),name:"name",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:border-white/40 transition-colors",required:!0})}),t.jsx("div",{children:t.jsx("input",{type:"tel",placeholder:r("contact.phone_placeholder"),value:g.phone,onChange:e=>w(e),name:"phone",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:border-white/40 transition-colors",required:!0})}),t.jsx("div",{children:t.jsx("input",{type:"email",placeholder:r("contact.email_placeholder"),value:g.email,onChange:e=>w(e),name:"email",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:border-white/40 transition-colors",required:!0})}),t.jsx("div",{children:t.jsx("input",{type:"text",placeholder:r("contact.delivery_address_placeholder"),value:g.delivery_address,onChange:e=>w(e),name:"delivery_address",className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:border-white/40 transition-colors",required:!0})}),t.jsx("div",{children:t.jsx("textarea",{placeholder:r("contact.message_placeholder"),value:g.message,onChange:e=>w(e),name:"message",rows:4,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-300 focus:outline-none focus:border-white/40 transition-colors resize-none"})}),t.jsxs("button",{type:"submit",disabled:b,className:"w-full bg-white/20 text-white py-3 px-6 rounded-lg font-semibold hover:bg-white/30 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-300 flex items-center justify-center gap-2",children:[t.jsx(v,{className:"h-5 w-5"}),b?r("contact.sending"):i.length>0?r("contact.place_order"):r(h?"contact.place_order":"contact.send_message")]})]})]}),t.jsxs(A.div,{variants:C,className:"w-full bg-white/10 backdrop-blur-xl rounded-2xl p-6 py-16 shadow-2xl border border-white/20",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:r("contact.contact_info")}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(x,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.phone")}),t.jsx("a",{href:"tel:+998901234567",className:"text-white hover:underline",children:"+998 90 123 45 67"})," ",t.jsx("br",{}),t.jsx("a",{href:"tel:+998912345678",className:"text-white hover:underline",children:"+998 91 234 56 78"})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(v,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.telegram")}),t.jsx("a",{href:"https://t.me/eurodoor_uz",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:underline",children:r("contact.telegram_handle")})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(k,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.instagram")}),t.jsx("a",{href:"https://instagram.com/eurodoor.uz",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:underline",children:r("contact.instagram_handle")})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(_,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.email")}),t.jsx("p",{className:"text-white",children:r("contact.email_address")})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(y,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.our_location")}),t.jsxs("p",{className:"text-white",children:[r("contact.address_detail"),", ",t.jsx("br",{}),r("contact.address_street")]})]})]}),t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-full flex items-center justify-center flex-shrink-0",children:t.jsx(S,{className:"h-6 w-6 text-white"})}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-white mb-1",children:r("contact.working_hours")}),t.jsxs("p",{className:"text-white",children:[r("contact.working_hours_weekdays")," ",t.jsx("br",{}),r("contact.working_hours_weekend")]})]})]})]})]})]})})})]})]})}},Symbol.toStringTag,{value:"Module"})),we=Object.freeze(Object.defineProperty({__proto__:null,default:({orderNumber:a,customerName:r,customerPhone:i,totalAmount:l,onNavigate:o})=>{const{t:c}=L(),[d,h]=e.useState({orderNumber:a||"",customerName:r||"",customerPhone:i||"",totalAmount:l||0});e.useEffect(()=>{const e=localStorage.getItem("lastOrderData");if(e){const t=JSON.parse(e);h(t)}},[]);const[u]=e.useState("checking");e.useEffect(()=>{},[]);return t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 overflow-auto",children:t.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 pt-28",children:t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-2xl w-full",children:[t.jsxs(A.div,{initial:{scale:.9},animate:{scale:1},transition:{delay:.2,duration:.5},className:"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-8 text-center",children:[t.jsx(A.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.4,duration:.5,type:"spring"},className:"flex justify-center mb-6",children:t.jsx("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center",children:t.jsx(n,{className:"w-12 h-12 text-green-600"})})}),t.jsx(A.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"text-3xl font-bold text-white mb-4",children:c("orderSuccess.title")}),t.jsx(A.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.7},className:"text-gray-200 text-lg mb-8",children:c("orderSuccess.subtitle")}),t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"bg-white/5 backdrop-blur-sm rounded-2xl p-6 mb-8 text-left border border-white/10",children:[t.jsx("h3",{className:"text-xl font-semibold text-white mb-4 text-center",children:c("orderSuccess.orderDetails")}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/20",children:[t.jsx("span",{className:"text-gray-300 font-medium",children:c("orderSuccess.orderNumber")}),t.jsx("span",{className:"text-white font-bold text-lg",children:d.orderNumber})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/20",children:[t.jsx("span",{className:"text-gray-300 font-medium",children:c("orderSuccess.customerName")}),t.jsx("span",{className:"text-white font-semibold",children:d.customerName})]}),t.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-white/20",children:[t.jsx("span",{className:"text-gray-300 font-medium",children:c("orderSuccess.phone")}),t.jsx("span",{className:"text-white font-semibold",children:d.customerPhone})]}),t.jsxs("div",{className:"flex justify-between items-center py-2",children:[t.jsx("span",{className:"text-gray-300 font-medium",children:c("orderSuccess.totalAmount")}),t.jsxs("span",{className:"text-green-400 font-bold text-xl",children:[d.totalAmount.toLocaleString()," so'm"]})]})]})]}),t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"bg-blue-500/10 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-blue-400/20",children:[t.jsxs("div",{className:"flex items-center justify-center mb-3",children:[t.jsx(x,{className:"w-5 h-5 text-blue-400 mr-2"}),t.jsx("h4",{className:"text-lg font-semibold text-blue-300",children:c("orderSuccess.contactInfo")})]}),t.jsx("p",{className:"text-blue-200 text-center",children:c("orderSuccess.contactText")})]}),"granted"!==u&&t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.95},className:"bg-yellow-500/10 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-yellow-400/20",children:[t.jsxs("div",{className:"flex items-center justify-center mb-3",children:[t.jsx(m,{className:"w-5 h-5 text-yellow-400 mr-2"}),t.jsx("h4",{className:"text-lg font-semibold text-yellow-300",children:c("orderSuccess.notificationTitle")})]}),t.jsx("p",{className:"text-yellow-200 text-center mb-4",children:c("orderSuccess.notificationText")}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:async()=>{},className:"flex-1 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-200 font-semibold py-3 px-6 rounded-xl border border-yellow-400/30 transition-all duration-300 hover:scale-105",children:c("orderSuccess.enableNotifications")}),t.jsx("button",{onClick:async()=>{try{if("granted"!==u)return;(await G.testOrderStatusChange(d.orderNumber,"confirmed")).success}catch(e){}},className:"bg-blue-500/20 hover:bg-blue-500/30 text-blue-200 font-semibold py-3 px-4 rounded-xl border border-blue-400/30 transition-all duration-300 hover:scale-105",title:"Test notification",children:"🧪"})]})]}),"granted"===u&&t.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.95},className:"bg-green-500/10 backdrop-blur-sm rounded-2xl p-6 mb-8 border border-green-400/20",children:[t.jsxs("div",{className:"flex items-center justify-center mb-3",children:[t.jsx(m,{className:"w-5 h-5 text-green-400 mr-2"}),t.jsx("h4",{className:"text-lg font-semibold text-green-300",children:c("orderSuccess.notificationsEnabled")})]}),t.jsx("p",{className:"text-green-200 text-center",children:c("orderSuccess.notificationsEnabledText")})]}),t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[t.jsxs("button",{onClick:()=>{localStorage.removeItem("lastOrderData"),o("home")},className:"flex items-center justify-center px-8 py-4 bg-white/10 backdrop-blur-sm border border-white/20 text-white rounded-2xl font-semibold hover:bg-white/20 hover:border-white/30 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 hover:scale-105",children:[t.jsx(C,{className:"w-5 h-5 mr-2"}),c("orderSuccess.goHome")]}),t.jsxs("button",{onClick:()=>{localStorage.removeItem("lastOrderData"),o("catalog")},className:"flex items-center justify-center px-8 py-4 bg-gradient-to-r from-emerald-500/20 to-green-500/20 backdrop-blur-sm border border-emerald-400/30 text-emerald-300 rounded-2xl font-semibold hover:from-emerald-500/30 hover:to-green-500/30 hover:border-emerald-400/50 hover:text-emerald-200 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 hover:scale-105",children:[t.jsx(s,{className:"w-5 h-5 mr-2"}),c("orderSuccess.newOrder")]})]})]}),t.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1},className:"mt-8 text-center",children:t.jsx("p",{className:"text-gray-300 text-sm",children:c("orderSuccess.thankYou")})})]})})})}},Symbol.toStringTag,{value:"Module"})),je=[{key:"pending",label:"Kutilmoqda",icon:S,color:"text-yellow-600"},{key:"confirmed",label:"Tasdiqlangan",icon:n,color:"text-blue-600"},{key:"processing",label:"Tayyorlanmoqda",icon:d,color:"text-purple-600"},{key:"shipped",label:"Yuborilgan",icon:q,color:"text-indigo-600"},{key:"delivered",label:"Yetkazilgan",icon:C,color:"text-green-600"}];const ye=Object.freeze(Object.defineProperty({__proto__:null,default:function(){const[a,s]=e.useState(""),[r,i]=e.useState([]),[l,n]=e.useState(!1),[o,c]=e.useState(""),[m,h]=e.useState(null),{user:u}=ie();L(),e.useEffect(()=>{if(u){(async()=>{try{const{error:e}=await $.from("orders").select("count").limit(1)}catch(e){}})(),x();const e=$.channel("customer-orders-realtime",{config:{broadcast:{self:!0},presence:{key:"customer-orders"}}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"orders"},e=>{x()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders"},e=>{const t=e.old?.status,a=e.new?.status;if(t&&a&&t!==a){if("undefined"!=typeof window&&"Notification"in window&&"granted"===Notification.permission){const t={pending:"Buyurtmangiz qabul qilindi va ko'rib chiqilmoqda",confirmed:"Buyurtmangiz tasdiqlandi va ishlab chiqarishga yuborildi",processing:"Buyurtmangiz ishlab chiqarilmoqda",ready:"Buyurtmangiz tayyor! Yetkazib berish uchun tayyorlanmoqda",shipped:"Buyurtmangiz yuborildi va yo'lda",delivered:"Buyurtmangiz yetkazib berildi! Rahmat!",cancelled:"Buyurtmangiz bekor qilindi"}[a]||`Buyurtma holati o'zgartirildi: ${a}`;new Notification(`Eurodoor - Buyurtma #${e.new.order_number}`,{body:t,icon:"/favicon.ico",tag:`order-${e.new.order_number}`,requireInteraction:!0})}if(u&&u.id)try{Q.notifyOrderStatusChange(e.new.order_number,a,u.id).then(()=>{}).catch(e=>{})}catch(s){}}i(t=>t.map(t=>t.id===e.new.id?(h(new Date),{...t,...e.new}):t))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"orders"},e=>{i(t=>t.filter(t=>t.id!==e.old.id))}).subscribe(e=>{});return()=>{e.unsubscribe()}}},[u]);const x=async()=>{if(u)try{n(!0);const{data:e,error:t}=await $.from("orders").select("*").eq("customer_email",u.email).order("created_at",{ascending:!1});if(t)throw t;i(e||[])}catch(e){c("Buyurtmalarni yuklashda xatolik yuz berdi")}finally{n(!1)}},b=async()=>{if(a.trim())try{n(!0),c("");const{data:e,error:t}=await $.from("orders").select("*").or(`order_number.ilike.%${a}%,customer_phone.ilike.%${a}%,customer_email.ilike.%${a}%`).order("created_at",{ascending:!1});if(t)throw t;i(e||[]),e&&0!==e.length||c("Buyurtma topilmadi")}catch(e){c("Qidiruvda xatolik yuz berdi")}finally{n(!1)}},p=e=>je.findIndex(t=>t.key===e),g=e=>new Intl.NumberFormat("uz-UZ",{style:"currency",currency:"UZS",minimumFractionDigits:0}).format(e);return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-12",children:t.jsx("div",{className:"container mx-auto px-4",children:t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Buyurtma Holatini Kuzatish"}),t.jsx("p",{className:"text-gray-300 text-lg",children:"Buyurtmalaringizning holatini real vaqtda kuzating"})]}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 mb-8",children:[t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[t.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),t.jsx("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Buyurtma raqami, telefon yoki email orqali qidiring",className:"w-full pl-10 pr-4 py-3 bg-white/20 border border-white/30 rounded-lg text-white placeholder-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent",onKeyPress:e=>"Enter"===e.key&&b()})]})}),t.jsx("button",{onClick:b,disabled:l||!a.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:l?"Qidirilmoqda...":"Qidirish"})]}),m&&t.jsxs("div",{className:"mt-4 flex items-center justify-center text-sm text-green-400",children:[t.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2 animate-pulse"}),"Oxirgi yangilanish: ",m.toLocaleTimeString("uz-UZ")]})]}),o&&t.jsx(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-500/20 border border-red-500/30 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx(E,{className:"h-5 w-5 text-red-400 mr-2"}),t.jsx("p",{className:"text-red-300",children:o})]})}),t.jsx("div",{className:"space-y-6",children:r.map(e=>{return t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-xl font-semibold text-white mb-1",children:["Buyurtma #",e.order_number]}),t.jsx("p",{className:"text-gray-300",children:(a=e.created_at,new Date(a).toLocaleDateString("uz-UZ",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),t.jsx("div",{className:"mt-4 md:mt-0",children:t.jsx("span",{className:"text-2xl font-bold text-blue-400",children:g(e.total_amount)})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("div",{className:"flex items-center justify-between mb-4 overflow-x-auto pb-2",children:je.map((a,s)=>{const r=p(e.status),i=s<=r,l=s===r,n=a.icon;return t.jsxs("div",{className:"flex flex-col items-center min-w-0 flex-1",children:[t.jsx("div",{className:"w-8 h-8 md:w-10 md:h-10 rounded-full flex items-center justify-center mb-2 "+(i?"bg-blue-600":"bg-gray-600"),children:t.jsx(n,{className:"h-4 w-4 md:h-5 md:w-5 "+(i?"text-white":"text-gray-400")})}),t.jsx("span",{className:"text-xs text-center leading-tight hidden md:block "+(i?"text-white":"text-gray-400"),children:a.label}),l&&t.jsx("span",{className:"text-xs text-center leading-tight text-blue-400 font-medium md:hidden mt-1",children:a.label})]},a.key)})}),t.jsxs("div",{className:"relative hidden md:block",children:[t.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gray-600 rounded-full"}),t.jsx("div",{className:"absolute top-0 left-0 h-1 bg-blue-600 rounded-full transition-all duration-500",style:{width:p(e.status)/(je.length-1)*100+"%"}})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Mijoz Ma'lumotlari"}),t.jsxs("div",{className:"space-y-2 text-gray-300",children:[t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Ism:"})," ",e.customer_name]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Telefon:"})," ",e.customer_phone]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Email:"})," ",e.customer_email]}),t.jsxs("p",{children:[t.jsx("span",{className:"font-medium",children:"Manzil:"})," ",e.delivery_address]})]})]}),t.jsxs("div",{children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-3",children:"Mahsulotlar"}),t.jsx("div",{className:"space-y-2",children:e.products?.map((e,a)=>t.jsxs("div",{className:"text-gray-300",children:[t.jsx("p",{className:"font-medium",children:e.model_name||e.name}),t.jsxs("p",{className:"text-sm",children:["Miqdor: ",e.quantity," | Narx: ",g(e.price*e.quantity)]})]},a))})]})]}),e.notes&&t.jsxs("div",{className:"mt-6 p-4 bg-white/5 rounded-lg",children:[t.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Qo'shimcha Izoh"}),t.jsx("p",{className:"text-gray-300",children:e.notes})]})]},e.id);var a})}),0===r.length&&!l&&!o&&t.jsxs("div",{className:"text-center py-12",children:[t.jsx(d,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Buyurtmalar topilmadi"}),t.jsx("p",{className:"text-gray-300",children:"Buyurtma raqami, telefon yoki email orqali qidiring"})]})]})})})}},Symbol.toStringTag,{value:"Module"}));const Ne=Object.freeze(Object.defineProperty({__proto__:null,default:function({onNavigate:a}){const{user:s,updateProfile:r}=ie();L();const[i,l]=e.useState(!1),[m,h]=e.useState({name:"",phone:"",email:"",avatar_url:""}),[u,b]=e.useState({total_purchases:0,total_orders:0,avatar_url:""}),[p,g]=e.useState(!1),[f,w]=e.useState({totalOrders:0,totalSpent:0,memberDays:0}),[j,y]=e.useState(!0);return e.useEffect(()=>{s&&(h({name:s.name||u.name||"",phone:s.phone||u.phone||"",email:s.email||u.email||"",avatar_url:u.avatar_url||""}),(async()=>{if(s)try{y(!0);try{const{customerMigrationApi:e}=await ee(async()=>{const{customerMigrationApi:e}=await import("./lib-Cky00deG.js").then(e=>e.h);return{customerMigrationApi:e}},__vite__mapDeps([0,1,2,3])),t=await e.getCustomerData(s.id);t.data?b({total_purchases:t.data.total_purchases||0,total_orders:t.data.total_orders||0,avatar_url:t.data.avatar_url||""}):b({total_purchases:0,total_orders:0,avatar_url:""})}catch(e){b({total_purchases:0,total_orders:0,avatar_url:""})}let t=[];try{const{data:e,error:a}=await $.from("orders").select("id, total_amount, status, created_at, updated_at").eq("customer_id",s.id).order("created_at",{ascending:!1});a||(t=e||[])}catch(e){}const a=t?.length||0,r=t?.reduce((e,t)=>"delivered"===t.status||"completed"===t.status?e+(t.total_amount||0):e,0)||0,i=Math.floor((Date.now()-new Date(s.created_at).getTime())/864e5);w({totalOrders:a,totalSpent:r,memberDays:i})}catch(e){}finally{y(!1)}})())},[s,u.name,u.phone,u.email,u.avatar_url]),e.useEffect(()=>{if(s)return()=>{}},[s]),s?t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 py-12 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Mening Profilim"}),t.jsx("p",{className:"text-gray-300",children:"Shaxsiy ma'lumotlaringizni boshqaring"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[t.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.2},className:"lg:col-span-2",children:t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h2",{className:"text-xl font-semibold text-white",children:"Shaxsiy ma'lumotlar"}),i?t.jsxs("div",{className:"flex space-x-2",children:[t.jsx("button",{onClick:async()=>{try{const e=await r(m);e.success?(l(!1),alert("✅ Profil muvaffaqiyatli yangilandi!\n\n📡 Admin panelida ham darhol ko'rinadi.\n🔄 Real-time sinxronlash ishlayapti.\n\n🔍 Admin panelni tekshiring: localhost:5173")):alert("❌ Xatolik: "+e.error)}catch(e){alert("❌ Profil yangilashda xatolik yuz berdi")}},className:"flex items-center justify-center w-10 h-10 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",title:"Saqlash",children:t.jsx(P,{className:"w-5 h-5"})}),t.jsx("button",{onClick:()=>{h({name:s?.name||u.name||"",phone:s?.phone||u.phone||"",email:s?.email||u.email||"",avatar_url:u.avatar_url||""}),l(!1)},className:"flex items-center justify-center w-10 h-10 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",title:"Bekor qilish",children:t.jsx(O,{className:"w-5 h-5"})})]}):t.jsx("button",{onClick:()=>l(!0),className:"flex items-center justify-center w-10 h-10 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",title:"Tahrirlash",children:t.jsx(I,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsxs("div",{className:"relative",children:[u.avatar_url?t.jsx("img",{src:u.avatar_url,alt:"Avatar",className:"w-12 h-12 rounded-lg object-cover border-2 border-white/20"}):t.jsx("div",{className:"w-12 h-12 bg-blue-500/20 rounded-lg flex items-center justify-center",children:t.jsx(c,{className:"w-6 h-6 text-blue-400"})}),i&&t.jsxs("label",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-700 transition-colors",title:"Avatar yuklash",children:[t.jsx(D,{className:"w-3 h-3 text-white"}),t.jsx("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files?.[0];t&&(async e=>{if(s)try{g(!0);const{data:a,error:r}=await $.storage.listBuckets();if(r)return void alert("Storage xizmati mavjud emas. Iltimos, keyinroq urinib ko'ring.");let i="user-uploads";const l=a?.find(e=>"user-uploads"===e.name||"avatars"===e.name||"public"===e.name);if(l)i=l.name;else{if(!(a&&a.length>0))return void alert("Storage bucket mavjud emas. Avatar yuklash imkoniyati yo'q.");i=a[0].name}const n=e.name.split(".").pop(),o=`avatars/${s.id}-${Date.now()}.${n}`,{error:c}=await $.storage.from(i).upload(o,e,{cacheControl:"3600",upsert:!1});if(c)return void alert("Rasm yuklashda xatolik yuz berdi: "+c.message);const{data:d}=$.storage.from(i).getPublicUrl(o),m=d.publicUrl;try{const{customerMigrationApi:e}=await ee(async()=>{const{customerMigrationApi:e}=await import("./lib-Cky00deG.js").then(e=>e.h);return{customerMigrationApi:e}},__vite__mapDeps([0,1,2,3]));(await e.updateCustomer(s.id,{avatar_url:m})).success?(h(e=>({...e,avatar_url:m})),b(e=>({...e,avatar_url:m})),alert("Avatar muvaffaqiyatli yangilandi!")):(h(e=>({...e,avatar_url:m})),b(e=>({...e,avatar_url:m})),alert("Avatar yuklandi, lekin database yangilanmadi"))}catch(t){h(e=>({...e,avatar_url:m})),b(e=>({...e,avatar_url:m})),alert("Avatar yuklandi, lekin database yangilanmadi")}}catch(a){alert("Avatar yuklashda xatolik yuz berdi")}finally{g(!1)}})(t)},className:"hidden",disabled:p})]}),p&&t.jsx("div",{className:"absolute inset-0 bg-black/50 rounded-lg flex items-center justify-center",children:t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ism"}),i?t.jsx("input",{type:"text",value:m.name,onChange:e=>h({...m,name:e.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-white/40 transition-colors",placeholder:"Ismingizni kiriting"}):t.jsx("p",{className:"text-white font-medium",children:s.name||"Kiritilmagan"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:t.jsx(x,{className:"w-6 h-6 text-green-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Telefon raqami"}),i?t.jsx("input",{type:"tel",value:m.phone,onChange:e=>h({...m,phone:e.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-white/40 transition-colors",placeholder:"+998 90 123 45 67"}):t.jsx("p",{className:"text-white font-medium",children:s.phone||"Kiritilmagan"})]})]}),t.jsxs("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:t.jsx(_,{className:"w-6 h-6 text-purple-400"})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email (ixtiyoriy)"}),i?t.jsx("input",{type:"email",value:m.email,onChange:e=>h({...m,email:e.target.value}),className:"w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-white/40 transition-colors",placeholder:"Email manzilingiz (ixtiyoriy)"}):t.jsx("p",{className:"text-white font-medium",children:s.email||u.email||"Kiritilmagan"})]})]})]})]})}),t.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"space-y-6",children:[t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tezkor amallar"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("button",{onClick:()=>a("orders"),className:"w-full flex items-center space-x-3 px-4 py-3 bg-blue-600/20 hover:bg-blue-600/30 text-blue-300 rounded-lg transition-colors",children:[t.jsx(o,{className:"w-5 h-5"}),t.jsx("span",{children:"Buyurtmalarim"})]}),t.jsxs("button",{onClick:()=>a("catalog"),className:"w-full flex items-center space-x-3 px-4 py-3 bg-green-600/20 hover:bg-green-600/30 text-green-300 rounded-lg transition-colors",children:[t.jsx(d,{className:"w-5 h-5"}),t.jsx("span",{children:"Mahsulotlar"})]})]})]}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[t.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Statistika"}),j?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Buyurtmalar soni"}),t.jsx("div",{className:"w-8 h-4 bg-white/20 rounded animate-pulse"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Jami xarid"}),t.jsx("div",{className:"w-16 h-4 bg-white/20 rounded animate-pulse"})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"A'zo bo'lgan"}),t.jsx("div",{className:"w-12 h-4 bg-white/20 rounded animate-pulse"})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Buyurtmalar soni"}),t.jsx("span",{className:"text-white font-semibold",children:u.total_orders||f.totalOrders})]}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Jami xarid"}),t.jsxs("span",{className:"text-white font-semibold",children:[(u.total_purchases||f.totalSpent).toLocaleString("uz-UZ")," UZS"]})]})]})]}),t.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[t.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center space-x-2",children:[t.jsx(S,{className:"w-5 h-5 text-yellow-400"}),t.jsx("span",{children:"Buyurtmalar holati"})]}),j?t.jsx("div",{className:"space-y-3",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Yuklangan buyurtmalar"}),t.jsx("div",{className:"w-8 h-4 bg-white/20 rounded animate-pulse"})]})}):t.jsx("div",{className:"space-y-3",children:f.totalOrders>0?t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-gray-300",children:"Jami buyurtmalar"}),t.jsx("span",{className:"text-white font-semibold",children:f.totalOrders})]}),t.jsxs("div",{className:"text-sm text-gray-400",children:["Oxirgi yangilanish: ",(new Date).toLocaleString("uz-UZ")]})]}):t.jsxs("div",{className:"text-center py-4",children:[t.jsx(n,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),t.jsx("p",{className:"text-gray-400",children:"Hali buyurtma yo'q"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"Birinchi buyurtmangizni berish uchun katalogga o'ting"})]})})]})]})]})]})}):t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Profil ko'rish uchun tizimga kiring"}),t.jsx("button",{onClick:()=>a("home"),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Bosh sahifaga qaytish"})]})})}},Symbol.toStringTag,{value:"Module"})),ve=Object.freeze(Object.defineProperty({__proto__:null,default:({isMobile:s=!1,onMobileClose:r,isOpen:i,onUnreadCountChange:l,onClose:o})=>{const[c,h]=e.useState(!1),u=void 0!==i?i:c,x=void 0!==i?o||(()=>{}):h,[b,p]=e.useState([]),[g,f]=e.useState(0),[w,j]=e.useState(!1),{user:y}=ie(),N=(e,a)=>{const s="w-5 h-5 "+("high"===a?"text-red-500":"medium"===a?"text-yellow-500":"text-blue-500");switch(e){case"order_update":return t.jsx(d,{className:s});case"system_alert":return t.jsx(E,{className:s});case"promotion":return t.jsx(n,{className:s});default:return t.jsx(m,{className:s})}},v=e=>{const t=new Date(e),a=((new Date).getTime()-t.getTime())/36e5;return a<1?"Az oldin":a<24?`${Math.floor(a)} soat oldin`:a<48?"Kecha":t.toLocaleDateString("uz-UZ")};return e.useEffect(()=>{y&&(async()=>{if(y)try{j(!0);const{data:e,error:t}=await $.from("notifications").select("*").eq("user_id",y.id).order("created_at",{ascending:!1}).limit(50);if(t)throw t;p(e||[]);const a=e?.filter(e=>!e.is_read).length||0;f(a),l&&l(a)}catch(e){}finally{j(!1)}})()},[y]),e.useEffect(()=>{if(!y)return;const e=$.channel("notifications-realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${y.id}`},e=>{p(t=>[e.new,...t]);const t=g+1;f(t),l&&l(t)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:`user_id=eq.${y.id}`},e=>{const t=e.new;if(p(e=>e.map(e=>e.id===t.id?t:e)),t.is_read){const e=Math.max(0,g-1);f(e),l&&l(e)}}).subscribe();return()=>{e.unsubscribe()}},[y]),y?t.jsx("div",{className:"relative",children:t.jsx(T,{children:u&&t.jsxs(A.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:`absolute ${s?"left-0 right-0 mx-4":"right-0"} top-full mt-2 ${s?"w-auto":"w-80"} rounded-lg shadow-2xl border border-white/30 z-50`,style:{background:"linear-gradient(135deg, #304675 0%, #451B6F 100%)",backdropFilter:"blur(20px)"},children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/30",style:{background:"linear-gradient(90deg, rgba(48, 70, 117, 0.3) 0%, rgba(69, 27, 111, 0.3) 100%)"},children:[t.jsx("h3",{className:"text-white font-semibold",children:"Bildirishnomalar"}),t.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&t.jsx("button",{onClick:async()=>{if(y)try{const{data:e,error:t}=await $.from("notifications").update({is_read:!0}).eq("user_id",y.id).eq("is_read",!1).select();if(t)throw t;p(e=>e.map(e=>({...e,is_read:!0}))),f(0),l&&l(0)}catch(e){alert("Bildirishnomalarni o'qilgan deb belgilashda xatolik yuz berdi. Iltimos, qaytadan urinib ko'ring.")}},className:"text-blue-400 hover:text-blue-300 transition-colors p-1 rounded hover:bg-white/10",title:"Barchasini o'qilgan deb belgilash",children:t.jsx(n,{className:"w-4 h-4"})}),t.jsx("button",{onClick:s?()=>{x(!1),r&&r()}:()=>x(!1),className:"text-white/70 hover:text-white transition-colors",children:t.jsx(a,{className:"w-4 h-4"})})]})]}),t.jsx("div",{className:"max-h-96 overflow-y-auto custom-scrollbar",children:w?t.jsxs("div",{className:"p-4 text-center text-white/80",children:[t.jsx(S,{className:"w-6 h-6 mx-auto mb-2 animate-spin"}),"Yuklanmoqda..."]}):0===b.length?t.jsxs("div",{className:"p-8 text-center text-white/80",children:[t.jsx(m,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),t.jsx("p",{children:"Bildirishnomalar yo'q"})]}):b.map(e=>t.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"p-4 border-b border-white/20 hover:bg-white/10 transition-colors cursor-pointer "+(e.is_read?"bg-transparent":"bg-white/20"),onClick:()=>(async e=>{try{const{data:t,error:a}=await $.from("notifications").update({is_read:!0}).eq("id",e).select();if(a)throw a;p(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t));const s=Math.max(0,g-1);f(s),l&&l(s)}catch(t){}})(e.id),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("div",{className:"flex-shrink-0 mt-1",children:N(e.type,e.priority)}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("h4",{className:"text-white font-medium text-sm truncate",children:e.title}),!e.is_read&&t.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full flex-shrink-0"})]}),t.jsx("p",{className:"text-white/80 text-sm mb-2 line-clamp-2",children:e.message}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-white/60 text-xs",children:v(e.created_at)}),e.order_number&&t.jsxs("span",{className:"text-blue-400 text-xs font-medium",children:["#",e.order_number]})]})]})]})},e.id))})]})})}):null}},Symbol.toStringTag,{value:"Module"}));export{me as A,fe as C,be as E,de as F,ae as H,pe as N,we as O,Ne as P,oe as T,ee as _,le as a,xe as b,ge as c,ye as d,ve as e,ue as i};
